!function(){var e,t,n,o,i,r,s={},l=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function h(t,n,o){var i,r,s,l={};for(s in n)"key"==s?i=n[s]:"ref"==s?r=n[s]:l[s]=n[s];if(arguments.length>2&&(l.children=arguments.length>3?e.call(arguments,2):o),"function"==typeof t&&null!=t.defaultProps)for(s in t.defaultProps)void 0===l[s]&&(l[s]=t.defaultProps[s]);return d(t,l,i,r,null)}function d(e,o,i,r,s){var l={type:e,props:o,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++n:s};return null!=t.vnode&&t.vnode(l),l}function f(e){return e.children}function _(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?p(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function v(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!b.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||i)(b)}function b(){for(var e;b.__r=o.length;)e=o.sort((function(e,t){return e.__v.__b-t.__v.__b})),o=[],e.some((function(e){var t,n,o,i,r,s;e.__d&&(r=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(o=c({},i)).__v=i.__v+1,I(s,i,o,t.__n,void 0!==s.ownerSVGElement,null!=i.__h?[r]:null,n,null==r?p(i):r,i.__h),A(n,i),i.__e!=r&&g(i)))}))}function m(e,t,n,o,i,r,a,c,u,h){var _,g,v,b,m,E,C,S=o&&o.__k||l,w=S.length;for(n.__k=[],_=0;_<t.length;_++)if(null!=(b=n.__k[_]=null==(b=t[_])||"boolean"==typeof b?null:"string"==typeof b||"number"==typeof b||"bigint"==typeof b?d(null,b,null,null,b):Array.isArray(b)?d(f,{children:b},null,null,null):b.__b>0?d(b.type,b.props,b.key,null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(v=S[_])||v&&b.key==v.key&&b.type===v.type)S[_]=void 0;else for(g=0;g<w;g++){if((v=S[g])&&b.key==v.key&&b.type===v.type){S[g]=void 0;break}v=null}I(e,b,v=v||s,i,r,a,c,u,h),m=b.__e,(g=b.ref)&&v.ref!=g&&(C||(C=[]),v.ref&&C.push(v.ref,null,b),C.push(g,b.__c||m,b)),null!=m?(null==E&&(E=m),"function"==typeof b.type&&null!=b.__k&&b.__k===v.__k?b.__d=u=y(b,u,e):u=T(e,b,v,S,m,u),h||"option"!==n.type?"function"==typeof n.type&&(n.__d=u):e.value=""):u&&v.__e==u&&u.parentNode!=e&&(u=p(v))}for(n.__e=E,_=w;_--;)null!=S[_]&&("function"==typeof n.type&&null!=S[_].__e&&S[_].__e==n.__d&&(n.__d=p(o,_+1)),O(S[_],S[_]));if(C)for(_=0;_<C.length;_++)W(C[_],C[++_],C[++_])}function y(e,t,n){var o,i;for(o=0;o<e.__k.length;o++)(i=e.__k[o])&&(i.__=e,t="function"==typeof i.type?y(i,t,n):T(n,i,i,e.__k,i.__e,t));return t}function T(e,t,n,o,i,r){var s,l,a;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||i!=r||null==i.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(i),s=null;else{for(l=r,a=0;(l=l.nextSibling)&&a<o.length;a+=2)if(l==i)break e;e.insertBefore(i,r),s=r}return void 0!==s?s:i.nextSibling}function E(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||a.test(t)?n:n+"px"}function C(e,t,n,o,i){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||E(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||E(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?w:S,r):e.removeEventListener(t,r?w:S,r);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function S(e){this.l[e.type+!1](t.event?t.event(e):e)}function w(e){this.l[e.type+!0](t.event?t.event(e):e)}function I(n,o,i,r,l,a,h,d,g){var v,b,y,T,E,S,w,I,A,W,O,x=o.type;if(void 0!==o.constructor)return null;null!=i.__h&&(g=i.__h,d=o.__e=i.__e,o.__h=null,a=[d]),(v=t.__b)&&v(o);try{e:if("function"==typeof x){if(I=o.props,A=(v=x.contextType)&&r[v.__c],W=v?A?A.props.value:v.__:r,i.__c?w=(b=o.__c=i.__c).__=b.__E:("prototype"in x&&x.prototype.render?o.__c=b=new x(I,W):(o.__c=b=new _(I,W),b.constructor=x,b.render=k),A&&A.sub(b),b.props=I,b.state||(b.state={}),b.context=W,b.__n=r,y=b.__d=!0,b.__h=[]),null==b.__s&&(b.__s=b.state),null!=x.getDerivedStateFromProps&&(b.__s==b.state&&(b.__s=c({},b.__s)),c(b.__s,x.getDerivedStateFromProps(I,b.__s))),T=b.props,E=b.state,y)null==x.getDerivedStateFromProps&&null!=b.componentWillMount&&b.componentWillMount(),null!=b.componentDidMount&&b.__h.push(b.componentDidMount);else{if(null==x.getDerivedStateFromProps&&I!==T&&null!=b.componentWillReceiveProps&&b.componentWillReceiveProps(I,W),!b.__e&&null!=b.shouldComponentUpdate&&!1===b.shouldComponentUpdate(I,b.__s,W)||o.__v===i.__v){b.props=I,b.state=b.__s,o.__v!==i.__v&&(b.__d=!1),b.__v=o,o.__e=i.__e,o.__k=i.__k,o.__k.forEach((function(e){e&&(e.__=o)})),b.__h.length&&h.push(b);break e}null!=b.componentWillUpdate&&b.componentWillUpdate(I,b.__s,W),null!=b.componentDidUpdate&&b.__h.push((function(){b.componentDidUpdate(T,E,S)}))}b.context=W,b.props=I,b.state=b.__s,(v=t.__r)&&v(o),b.__d=!1,b.__v=o,b.__P=n,v=b.render(b.props,b.state,b.context),b.state=b.__s,null!=b.getChildContext&&(r=c(c({},r),b.getChildContext())),y||null==b.getSnapshotBeforeUpdate||(S=b.getSnapshotBeforeUpdate(T,E)),O=null!=v&&v.type===f&&null==v.key?v.props.children:v,m(n,Array.isArray(O)?O:[O],o,i,r,l,a,h,d,g),b.base=o.__e,o.__h=null,b.__h.length&&h.push(b),w&&(b.__E=b.__=null),b.__e=!1}else null==a&&o.__v===i.__v?(o.__k=i.__k,o.__e=i.__e):o.__e=function(t,n,o,i,r,l,a,c){var h,d,f,_=o.props,g=n.props,v=n.type,b=0;if("svg"===v&&(r=!0),null!=l)for(;b<l.length;b++)if((h=l[b])&&(h===t||(v?h.localName==v:3==h.nodeType))){t=h,l[b]=null;break}if(null==t){if(null===v)return document.createTextNode(g);t=r?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),l=null,c=!1}if(null===v)_===g||c&&t.data===g||(t.data=g);else{if(l=l&&e.call(t.childNodes),d=(_=o.props||s).dangerouslySetInnerHTML,f=g.dangerouslySetInnerHTML,!c){if(null!=l)for(_={},b=0;b<t.attributes.length;b++)_[t.attributes[b].name]=t.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(function(e,t,n,o,i){var r;for(r in n)"children"===r||"key"===r||r in t||C(e,r,null,n[r],o);for(r in t)i&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||C(e,r,t[r],n[r],o)}(t,g,_,r,c),f)n.__k=[];else if(b=n.props.children,m(t,Array.isArray(b)?b:[b],n,o,i,r&&"foreignObject"!==v,l,a,l?l[0]:o.__k&&p(o,0),c),null!=l)for(b=l.length;b--;)null!=l[b]&&u(l[b]);c||("value"in g&&void 0!==(b=g.value)&&(b!==t.value||"progress"===v&&!b)&&C(t,"value",b,_.value,!1),"checked"in g&&void 0!==(b=g.checked)&&b!==t.checked&&C(t,"checked",b,_.checked,!1))}return t}(i.__e,o,i,r,l,a,h,g);(v=t.diffed)&&v(o)}catch(n){o.__v=null,(g||null!=a)&&(o.__e=d,o.__h=!!g,a[a.indexOf(d)]=null),t.__e(n,o,i)}}function A(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function W(e,n,o){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,o)}}function O(e,n,o){var i,r;if(t.unmount&&t.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||W(i,null,n)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){t.__e(e,n)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&O(i[r],n,"function"!=typeof e.type);o||null==e.__e||u(e.__e),e.__e=e.__d=void 0}function k(e,t,n){return this.constructor(e,n)}function x(n,o,i){var r,l,a;t.__&&t.__(n,o),l=(r="function"==typeof i)?null:i&&i.__k||o.__k,a=[],I(o,n=(!r&&i||o).__k=h(f,null,[n]),l||s,s,void 0!==o.ownerSVGElement,!r&&i?[i]:l?null:o.firstChild?e.call(o.childNodes):null,a,!r&&i?i:l?l.__e:o.firstChild,r),A(a,n)}let N;var P;let R;var M;e=l.slice,t={__e:function(e,t){for(var n,o,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},n=0,_.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},n),this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),v(this))},_.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},_.prototype.render=f,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b.__r=0,(P=N||(N={})).INFO="info",P.ALERT="alert",P.DANGER="danger",P.BASIC="basic",P.BASIC_BORDERLESS="basic-borderless",(M=R||(R={})).ALERT="alert",M.INFO="info";var D,G,B,U=0,L=[],F=t.__b,H=t.__r,K=t.diffed,Q=t.__c,V=t.unmount;function Y(e,n){t.__h&&t.__h(G,e,U||n),U=0;var o=G.__H||(G.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function $(e){return U=1,function(e,t,n){var o=Y(D++,2);return o.t=e,o.__c||(o.__=[n?n(t):ee(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=G),o.__}(ee,e)}function j(e,n){var o=Y(D++,3);!t.__s&&Z(o.__H,n)&&(o.__=e,o.__H=n,G.__H.__h.push(o))}function z(){L.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(q),e.__H.__h.forEach(X),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}})),L=[]}t.__b=function(e){G=null,F&&F(e)},t.__r=function(e){H&&H(e),D=0;var t=(G=e.__c).__H;t&&(t.__h.forEach(q),t.__h.forEach(X),t.__h=[])},t.diffed=function(e){K&&K(e);var n=e.__c;n&&n.__H&&n.__H.__h.length&&(1!==L.push(n)&&B===t.requestAnimationFrame||((B=t.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(o),J&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);J&&(t=requestAnimationFrame(n))})(z)),G=void 0},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(q),e.__h=e.__h.filter((function(e){return!e.__||X(e)}))}catch(o){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(o,e.__v)}})),Q&&Q(e,n)},t.unmount=function(e){V&&V(e);var n=e.__c;if(n&&n.__H)try{n.__H.__.forEach(q)}catch(e){t.__e(e,n.__v)}};var J="function"==typeof requestAnimationFrame;function q(e){var t=G;"function"==typeof e.__c&&e.__c(),G=t}function X(e){var t=G;e.__c=e.__(),G=t}function Z(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function ee(e,t){return"function"==typeof t?t(e):t}const te=({closable:e=!1,autoClose:t=!1,type:n=N.INFO,icon:o,margin:i,text:r,autoCloseDuration:s=5,...l})=>{const[a,c]=$(!1),[u,d]=$(null);return j(()=>{t&&!u&&d(setTimeout(()=>{c(!0)},1e3*s))},[t,s]),h(f,null,!a&&h("div",{class:`lum-AlertWarning${o&&o.length?" icon":""}${i&&i.length?" margin-"+i:""}${t?" autoClose":""}`},h("div",{id:"message",class:n},t&&h("div",{class:"timeout-indicator",style:{animationDuration:s+"s"}}),o&&o.length&&h("span",{class:"icon "+o},h("span",null)),h("span",{class:"text"},r),e&&h("button",{class:"close",onClick:()=>{c(!0)}},"x"))))};function ne(e){return"0"===e?0:"string"==typeof e?parseFloat(e):void 0}function oe(e){return!!e&&e.search(/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/g)>-1}function ie(e){if(!e||!oe(e))return null;const t=e.split(".");return{a:parseInt(t[0]),b:parseInt(t[1]),c:parseInt(t[2]),d:parseInt(t[3])}}function re(e,t,n,o){return void 0!==e&&void 0!==t&&void 0!==n&&void 0!==o?`${e}.${t}.${n}.${o}`:null}class se{_messages=[];constructor(e){this.reRender=e,this.renderActionSection=this.renderActionSection.bind(this),this.newDialog=this.newDialog.bind(this)}get dialogConfig(){return this._dialogConfig}set dialogConfig(e){this._dialogConfig=e,this.reRender()}get messages(){return this._messages}set messages(e){this._messages=e,this.reRender()}renderActionSection(){return h(f,null,this.messages&&!!this.messages.length&&h("div",{class:"lum-messages"+(this.dialogConfig?" mb-small":"")},this.messages.map(e=>e)),this.dialogConfig&&h("section",{class:"action-section no-margin"},this.dialogConfig.warningText&&h("div",null,h(te,{icon:this.dialogConfig.warningIcon,type:N.BASIC_BORDERLESS,text:this.dialogConfig.warningText})),h("div",null,h("button",{onClick:()=>{this.dialogConfig&&"function"==typeof this.dialogConfig.onCancel?this.dialogConfig.onCancel():this.dialogConfig=null}},this.dialogConfig.cancelText),h("button",{class:this.dialogConfig.okClass||"primary",onClick:()=>{this.dialogConfig&&"function"==typeof this.dialogConfig.onOk?this.dialogConfig.onOk():this.dialogConfig=null}},this.dialogConfig.okText))))}newDialog(e){this.dialogConfig&&this.dialogConfig.id===e.id||(this.dialogConfig={cancelText:"Cancel",okText:"Ok",...e},this.reRender())}clear(){this.dialogConfig=null,this.messages=[],this.reRender()}addMessage(e){this.messages=[...this.messages,h("div",{key:"_"+Math.random().toString(36).substr(2,9)},e)]}}let le;var ae;(ae=le||(le={}))[ae.DEVICE_NAME=1]="DEVICE_NAME",ae[ae.DEVICE_TYPE=2]="DEVICE_TYPE",ae[ae.NETWORK_IP1=3]="NETWORK_IP1",ae[ae.NETWORK_IP2=4]="NETWORK_IP2",ae[ae.NETWORK_IP3=5]="NETWORK_IP3",ae[ae.NETWORK_IP4=6]="NETWORK_IP4",ae[ae.NETWORK_GATEWAY1=7]="NETWORK_GATEWAY1",ae[ae.NETWORK_GATEWAY2=8]="NETWORK_GATEWAY2",ae[ae.NETWORK_GATEWAY3=9]="NETWORK_GATEWAY3",ae[ae.NETWORK_GATEWAY4=10]="NETWORK_GATEWAY4",ae[ae.NETWORK_SUBNET1=11]="NETWORK_SUBNET1",ae[ae.NETWORK_SUBNET2=12]="NETWORK_SUBNET2",ae[ae.NETWORK_SUBNET3=13]="NETWORK_SUBNET3",ae[ae.NETWORK_SUBNET4=14]="NETWORK_SUBNET4",ae[ae.NETWORK_SSID=15]="NETWORK_SSID",ae[ae.NETWORK_PASS=16]="NETWORK_PASS",ae[ae.NETWORK_DHCP=17]="NETWORK_DHCP",ae[ae.NETWORK_GATEWAY=18]="NETWORK_GATEWAY",ae[ae.NETWORK_SUBNET=19]="NETWORK_SUBNET",ae[ae.ACCESS_POINT_PASS=20]="ACCESS_POINT_PASS",ae[ae.GPIO_W=21]="GPIO_W",ae[ae.GPIO_WW=22]="GPIO_WW",ae[ae.GPIO_R=23]="GPIO_R",ae[ae.GPIO_G=24]="GPIO_G",ae[ae.GPIO_B=25]="GPIO_B",ae[ae.MQTT_ENABLED=26]="MQTT_ENABLED",ae[ae.MQTT_CLIENT_ID=27]="MQTT_CLIENT_ID",ae[ae.MQTT_USER=28]="MQTT_USER",ae[ae.MQTT_PASSWORD=29]="MQTT_PASSWORD",ae[ae.MQTT_IP1=30]="MQTT_IP1",ae[ae.MQTT_IP2=31]="MQTT_IP2",ae[ae.MQTT_IP3=32]="MQTT_IP3",ae[ae.MQTT_IP4=33]="MQTT_IP4",ae[ae.MQTT_PORT=34]="MQTT_PORT",ae[ae.MQTT_DEVICE_TOPIC=35]="MQTT_DEVICE_TOPIC",ae[ae.MQTT_AUTO_DISCOVERY=36]="MQTT_AUTO_DISCOVERY",ae[ae.INITIAL_W=37]="INITIAL_W",ae[ae.INITIAL_WW=38]="INITIAL_WW",ae[ae.INITIAL_R=39]="INITIAL_R",ae[ae.INITIAL_G=40]="INITIAL_G",ae[ae.INITIAL_B=41]="INITIAL_B",ae[ae.E131_ENABLED=42]="E131_ENABLED",ae[ae.E131_UNIVERSE=43]="E131_UNIVERSE",ae[ae.E131_START_CHAN=44]="E131_START_CHAN";const ce=({variant:e="primary",margin:t=!1,...n})=>h("div",{class:`lum-Chip ${e}${t?" margin-small":""}`},n.text||n.children);class ue{DEVELOPMENT=!1;HOST=document.location.host;constructor(){}jsonGET(e){return fetch(e).then((function(e){return e.json()}))}jsonPOST(e,t){return fetch(e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:t&&JSON.stringify(t)||""}).then(e=>e.json())}emptyPOST(e){return fetch(e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"text/plain"}}).then(e=>e.json())}}let he;var de;(de=he||(he={}))[de.NONE=0]="NONE",de[de.RGBWW=1]="RGBWW",de[de.RGBW=2]="RGBW",de[de.RGB=3]="RGB",de[de.WW=4]="WW",de[de.W=5]="W";class fe extends ue{constructor(){super()}loadConfigJson=()=>new Promise((e,t)=>{this.DEVELOPMENT?e({[le.DEVICE_NAME]:"My Smart Bulb",[le.DEVICE_TYPE]:he.RGBWW,[le.GPIO_R]:12,[le.GPIO_G]:14,[le.GPIO_B]:16,[le.GPIO_W]:15,[le.GPIO_WW]:13,[le.NETWORK_SSID]:"My_SSID",[le.NETWORK_DHCP]:!1,[le.NETWORK_IP1]:192,[le.NETWORK_IP2]:168,[le.NETWORK_IP3]:1,[le.NETWORK_IP4]:193,[le.NETWORK_GATEWAY1]:192,[le.NETWORK_GATEWAY2]:168,[le.NETWORK_GATEWAY3]:1,[le.NETWORK_GATEWAY4]:1,[le.NETWORK_SUBNET1]:255,[le.NETWORK_SUBNET2]:255,[le.NETWORK_SUBNET3]:0,[le.NETWORK_SUBNET4]:0}):this.jsonGET("config").then((function(t){e(t)})).catch((function(e){t(e)}))});saveConfigJson=e=>new Promise((t,n)=>{this.DEVELOPMENT?t(!0):this.jsonPOST("config",e).then((function(e){!0===e.success&&t(!0)})).catch((function(e){n(e)}))});hasUnsavedChanges(e,t){return(e?JSON.stringify(e):"")!==(t?JSON.stringify(t):"")}}let _e;var pe;(pe=_e||(_e={}))[pe.STANDBY=0]="STANDBY",pe[pe.RGB=1]="RGB",pe[pe.WHITE=2]="WHITE",pe[pe.WARM_WHITE=3]="WARM_WHITE",pe[pe.TEMP=4]="TEMP",pe[pe.GPIO_R=5]="GPIO_R",pe[pe.GPIO_G=6]="GPIO_G",pe[pe.GPIO_B=7]="GPIO_B",pe[pe.GPIO_W=8]="GPIO_W",pe[pe.GPIO_WW=9]="GPIO_WW";var ge={};!function(e){if("object"==typeof ge)ge=e();else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}((function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],o=e[1],i=e[2],r=e[3];o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[0]-680876936|0)<<7|n>>>25)+o|0)&o|~n&i)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&o)+t[2]+606105819|0)<<17|i>>>15)+r|0)&r|~i&n)+t[3]-1044525330|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[4]-176418897|0)<<7|n>>>25)+o|0)&o|~n&i)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&o)+t[6]-1473231341|0)<<17|i>>>15)+r|0)&r|~i&n)+t[7]-45705983|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[8]+1770035416|0)<<7|n>>>25)+o|0)&o|~n&i)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&o)+t[10]-42063|0)<<17|i>>>15)+r|0)&r|~i&n)+t[11]-1990404162|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[12]+1804603682|0)<<7|n>>>25)+o|0)&o|~n&i)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&o)+t[14]-1502002290|0)<<17|i>>>15)+r|0)&r|~i&n)+t[15]+1236535329|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[1]-165796510|0)<<5|n>>>27)+o|0)&i|o&~i)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&o|n&~o)+t[11]+643717713|0)<<14|i>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[5]-701558691|0)<<5|n>>>27)+o|0)&i|o&~i)+t[10]+38016083|0)<<9|r>>>23)+n|0)&o|n&~o)+t[15]-660478335|0)<<14|i>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[9]+568446438|0)<<5|n>>>27)+o|0)&i|o&~i)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&o|n&~o)+t[3]-187363961|0)<<14|i>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[13]-1444681467|0)<<5|n>>>27)+o|0)&i|o&~i)+t[2]-51403784|0)<<9|r>>>23)+n|0)&o|n&~o)+t[7]+1735328473|0)<<14|i>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[5]-378558|0)<<4|n>>>28)+o|0)^o^i)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^o)+t[11]+1839030562|0)<<16|i>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[1]-1530992060|0)<<4|n>>>28)+o|0)^o^i)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^o)+t[7]-155497632|0)<<16|i>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[13]+681279174|0)<<4|n>>>28)+o|0)^o^i)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^o)+t[3]-722521979|0)<<16|i>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[9]-640364487|0)<<4|n>>>28)+o|0)^o^i)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^o)+t[15]+530742520|0)<<16|i>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|o>>>9)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[0]-198630844|0)<<6|n>>>26)+o|0)|~i))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[14]-1416354905|0)<<15|i>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[12]+1700485571|0)<<6|n>>>26)+o|0)|~i))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[10]-1051523|0)<<15|i>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[8]+1873313359|0)<<6|n>>>26)+o|0)|~i))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[6]-1560198380|0)<<15|i>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[4]-145523070|0)<<6|n>>>26)+o|0)|~i))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[2]+718787259|0)<<15|i>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=r+e[3]|0}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function r(e){var t,i,r,s,l,a,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,o(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(n(u,r),t=0;t<16;t+=1)r[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,r[14]=l,r[15]=a,n(u,r),u}function s(e){var n,o="";for(n=0;n<4;n+=1)o+=t[e>>8*n+4&15]+t[e>>8*n&15];return o}function l(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,n=[],o=e.length;for(t=0;t<o-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function u(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==l(r("hello"))&&function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,o){var i,r,s,l,a=this.byteLength,c=t(n,a),u=a;return o!==e&&(u=t(o,a)),c>u?new ArrayBuffer(0):(i=u-c,r=new ArrayBuffer(i),s=new Uint8Array(r),l=new Uint8Array(this,c,i),s.set(l),r)}}(),u.prototype.append=function(e){return this.appendBinary(a(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,o(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},u.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(r,i),n=l(this._hash),e&&(n=c(n)),this.reset(),n},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,t){var o,i,r,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),r=parseInt(o[1],16)||0,e[14]=i,e[15]=r,n(this._hash,e)},u.hash=function(e,t){return u.hashBinary(a(e),t)},u.hashBinary=function(e,t){var n=l(r(e));return t?c(n):n},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var t,o,r,s,l,a=(o=this._buff.buffer,r=e,s=!0,(l=new Uint8Array(o.byteLength+r.byteLength)).set(new Uint8Array(o)),l.set(new Uint8Array(r),o.byteLength),s?l:l.buffer),c=a.length;for(this._length+=e.byteLength,t=64;t<=c;t+=64)n(this._hash,i(a.subarray(t-64,t)));return this._buff=t-64<c?new Uint8Array(a.buffer.slice(t-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,n,o=this._buff,i=o.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)r[t>>2]|=o[t]<<(t%4<<3);return this._finish(r,i),n=l(this._hash),e&&(n=c(n)),this.reset(),n},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e,t=u.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,o=e.length,i=new ArrayBuffer(o),r=new Uint8Array(i);for(n=0;n<o;n+=1)r[n]=e.charCodeAt(n);return t?r:i}(e.buff,!0),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,t){var o=l(function(e){var t,o,r,s,l,a,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,i(e.subarray(t-64,t)));for(o=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(n(u,r),t=0;t<16;t+=1)r[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,r[14]=l,r[15]=a,n(u,r),u}(new Uint8Array(e)));return t?c(o):o},u}));const ve=e=>{const[t,n]=$(e.value);return h("div",{class:"lum-DropdownMenu"},h("select",{value:e.value,class:e.placeholder&&void 0===e.value&&void 0===t?"placeholder":"",onChange:t=>{const o=t.target.value,i="number"===e.type?ne(o):o;n(i),"function"==typeof e.onSelect&&e.onSelect(i)}},e.placeholder&&h(f,null,h("option",{value:"",disabled:!0,selected:!0},e.placeholder),h("option",{value:"",disabled:!0},"---------------------------")),e.children),h("div",{class:"dropdown-indicator"}))},be=e=>{const t=t=>{const n=t.target.value;return"number"===e.type?ne(n):n.slice(0,e.maxLength||500)};return h("div",{class:"lum-Input"+(e.disabled?" disabled":"")},h("input",{disabled:e.disabled,type:e.type,class:"lum-Input-input",value:e.value,onInput:n=>{const o=t(n);"function"==typeof e.onChange&&e.onChange(o)},onBlur:n=>{const o=t(n);"function"==typeof e.onBlur&&e.onBlur(o)},onKeyPress:n=>{"Enter"===n.key&&"function"==typeof e.onEnter&&e.onEnter(t(n))}}),e.children)},me=({progress:e=0,...t})=>h("div",{class:"lum-Progress"},h("div",{class:"progress-bar",style:{width:e+"%"}})),ye=e=>h("div",{class:"lum-ToggleSwitch "+(void 0!==e.on&&e.on?"ON":"OFF")+(e.disabled?" disabled":""),ontouchstart:"return true;",onClick:()=>{"function"!=typeof e.onClick||e.disabled||e.onClick(!e.on)}},h("div",{class:"circle"})),Te=({config:e={},bannerService:t,hardwareService:n,websocketService:o,configService:i,...r})=>{const[s,l]=$("setup"),[a,c]=$(!1),[u,d]=$(),[_,p]=$(!1),[g,v]=$(),[b,m]=$(0),y=e=>{"function"==typeof r.onControlModeToggle&&(r.controlMode===e?r.onControlModeToggle(_e.STANDBY):r.onControlModeToggle(e))},T=()=>{d(null),v(null),m(0),l("setup")};return h(f,null,"setup"===s&&h(f,null,h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"name"},"Device Name"),h(be,{value:e[le.DEVICE_NAME]||void 0,maxLength:40,onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.DEVICE_NAME]:t})}}),h("div",{class:"helper-text"},"Max 40 characters")),h("div",{class:"form-group no-margin"},h("label",{for:"name"},"Device Type"),h(ve,{type:"number",placeholder:"Select a device type",value:e[le.DEVICE_TYPE]||void 0,onSelect:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.DEVICE_TYPE]:t})}},h("option",{value:"1"},"RGBWW (RGB w/ Cool / Warm White)"),h("option",{value:"2"},"RGBW (RGB w/ White)"),h("option",{value:"3"},"RGB"),h("option",{value:"4"},"WW (Cool / Warm White)"),h("option",{value:"5"},"W (White w/o Temp Control)"))))),h("section",null,h("div",{class:"grid-large"},h("div",null,h("label",{class:"mb-small"},"GPIO Mapping"),h("table",null,h("tr",{class:"header-row"},h("th",null,"Channel"),h("th",null,"GPIO"),h("th",null,"Test")),(e[le.DEVICE_TYPE]===he.RGB||e[le.DEVICE_TYPE]===he.RGBW||e[le.DEVICE_TYPE]===he.RGBWW)&&h(f,null,h("tr",null,h("td",null,"Red"),h("td",null,h(be,{value:e[le.GPIO_R]||void 0,type:"number",onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.GPIO_R]:t})}})),h("td",null,h(ye,{on:r.controlMode===_e.GPIO_R,onClick:()=>{y(_e.GPIO_R)}}))),h("tr",null,h("td",null,"Green"),h("td",null,h(be,{value:e[le.GPIO_G]||void 0,type:"number",onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.GPIO_G]:t})}})),h("td",null,h(ye,{on:r.controlMode===_e.GPIO_G,onClick:()=>{y(_e.GPIO_G)}}))),h("tr",null,h("td",null,"Blue"),h("td",null,h(be,{value:e[le.GPIO_B]||void 0,type:"number",onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.GPIO_B]:t})}})),h("td",null,h(ye,{on:r.controlMode===_e.GPIO_B,onClick:()=>{y(_e.GPIO_B)}})))),e[le.DEVICE_TYPE]!==he.RGB&&h("tr",null,h("td",null,"White"),h("td",null,h(be,{value:e[le.GPIO_W]||void 0,type:"number",onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.GPIO_W]:t})}})),h("td",null,h(ye,{on:r.controlMode===_e.GPIO_W,onClick:()=>{y(_e.GPIO_W)}}))),(e[le.DEVICE_TYPE]===he.RGBWW||e[le.DEVICE_TYPE]===he.WW)&&h("tr",null,h("td",null,"Warm White"),h("td",null,h(be,{value:e[le.GPIO_WW]||void 0,type:"number",onChange:t=>{"function"==typeof r.onConfigUpdate&&r.onConfigUpdate({...e,[le.GPIO_WW]:t})}})),h("td",null,h(ye,{on:r.controlMode===_e.GPIO_WW,onClick:()=>{y(_e.GPIO_WW)}})))),(r.controlMode===_e.GPIO_WW||r.controlMode===_e.GPIO_W||r.controlMode===_e.GPIO_R||r.controlMode===_e.GPIO_G||r.controlMode===_e.GPIO_B)&&h(te,{icon:R.INFO,text:"While GPIO testing is enabled, Lumenator will attempt to turn on the GPIO you are testing.  If Lumenator receives commands from other sources such as MQTT, the test will be overidden."})),h("div",null,h("label",{class:"mb-small"},"System"),h("button",{class:"mb-small width-100",onClick:()=>{t&&t.newDialog({warningText:"Are you sure?",okText:"Restart",okClass:"alert",onOk:()=>{"function"==typeof r.onLoading&&r.onLoading(!0),n&&o&&(n.restart(),setTimeout(()=>{o.close(),o.reconnect().then(e=>{e&&(t.clear(),t.addMessage(h(te,{text:"Restarted successfully",autoClose:!0,closable:!0})),"function"==typeof r.onControlModeToggle&&r.onControlModeToggle(_e.STANDBY),"function"==typeof r.onLoading&&r.onLoading(!1))})},1e3))}})}},"Restart"),h("button",{class:"mb-small width-100",onClick:()=>{t&&t.newDialog({warningText:"Are you sure? This cannot be undone.",okText:"Erase All",okClass:"alert",onOk:()=>{"function"==typeof r.onLoading&&r.onLoading(!0),n&&o&&(n.eraseAll(),setTimeout(()=>{t.clear(),t.addMessage(h(te,{text:"Erased configuration.  Restarting device...",autoCloseDuration:10,autoClose:!0,closable:!0})),"function"==typeof r.onLoading&&r.onLoading(!1),setTimeout(()=>{t.clear(),t.addMessage(h(te,{text:"Device has restarted in access point mode.  Connect to the device access point to set up Lumenator.",type:N.DANGER})),n.restart()},1e4)},1e3))}})}},"Erase Configuration"),h("button",{class:"mb-small width-100",onClick:()=>{l("update")}},"Update Firmware"))))),"update"===s&&h(f,null,h("div",{class:"section-action"},h("button",{disabled:a,onClick:T},"Go back")),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"name",class:"margin-bottom"},"Update Firmware"),h("div",null,h("input",{disabled:a,class:"form-input file-input",type:"file",accept:".bin,.bin.gz",onChange:e=>{if(null!==e&&e.target&&e.target.files){const t=e.target.files[0];t&&d(t)}}})),h("div",{class:"helper-text margin-top"},"Accepted file types are .bin and .bin.gz")),h("div",{class:"form-group no-margin"}),u&&!a&&h("div",{class:"margin-top"},h("button",{class:"primary",onClick:()=>{c(!0);const e=new FormData,t=new XMLHttpRequest;t.addEventListener("load",()=>{200===t.status?p(!0):500!==t.status?v("[HTTP ERROR] "+t.statusText):v(t.responseText),c(!1),m(0)}),t.upload.addEventListener("progress",e=>{m(Math.trunc(e.loaded/e.total*100))}),t.withCredentials=!0,u&&(e=>new Promise((t,n)=>{const o=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=Math.ceil(e.size/2097152),r=new ge.ArrayBuffer,s=new FileReader;let l=0;const a=()=>{const t=2097152*l,n=t+2097152>=e.size?e.size:t+2097152;s.readAsArrayBuffer(o.call(e,t,n))};s.onload=e=>{if(e.target){const n=e.target;if(r.append(n.result),l+=1,l<i)a();else{const e=r.end();t(e)}}},s.onerror=e=>{n(e)},a()}))(u).then(n=>{e.append("MD5",n),e.append("firmware",u,"firmware"),t.open("post","/update"),t.send(e)}).catch(()=>{v("Unknown error while upload, check the console for details."),c(!1),m(0)})}},"Upload"),h("button",{class:"ml-small",onClick:T},"Cancel")),a&&void 0!==b&&h("div",null,h(me,{progress:b||0}))),!a&&g&&h("div",{class:"margin-top"},h(te,{text:"ERROR: "+g,type:N.ALERT}))),h(te,{icon:R.ALERT,text:"WARNING: Make sure you upload the correct binary file.  Once the device receives the file, it will attempt to install it.  If firmware other than Lumenator is installed, you may not be able to update over the air again, unless the new firmware supports it.",type:N.DANGER})))},Ee=({config:e={},...t})=>{const n=(t,n=0,o=!1,i)=>h("tr",{class:"table-row"+(o?" first-row":"")},h("td",null,i&&h(ce,{text:""+e[le.E131_UNIVERSE]})),h("td",null,h(ce,{variant:"basic",text:""+((e[le.E131_START_CHAN]||0)+n-1)})),h("td",null,t));return h(f,null,h("div",{class:"section-action"},h(ye,{onClick:()=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.E131_ENABLED]:!e[le.E131_ENABLED]})},on:e[le.E131_ENABLED]}),h("label",null,"Enable E131 Streaming")),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"universe"},"Universe"),h(be,{id:"universe",type:"number",disabled:!e[le.E131_ENABLED],value:e[le.E131_UNIVERSE]||void 0,maxLength:4,onChange:n=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.E131_UNIVERSE]:n})}}),h("div",{class:"helper-text mt-large"},"The universe to listen for.")),h("div",{class:"form-group no-margin"},h("label",{for:"channel"},"Channel"),h(be,{id:"channel",type:"number",disabled:!e[le.E131_ENABLED],value:e[le.E131_START_CHAN]||void 0,maxLength:4,onChange:n=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.E131_START_CHAN]:n})}}),h("div",{class:"helper-text mt-large"},"The starting channel assigned to Lumenator.")))),e[le.E131_ENABLED]&&(e[le.E131_UNIVERSE]||0)>0&&(e[le.E131_START_CHAN]||0)>0&&h("section",null,h("div",{class:"form-group no-margin"},h("label",null,"Channel Mapping"),h("table",null,h("tr",{class:"header-row"},h("th",null,"Universe"),h("th",null,"Channel"),h("th",{width:"100%"},"Mapping")),(()=>{let t=[],o=1;return e[le.DEVICE_TYPE]!==he.RGB&&e[le.DEVICE_TYPE]!==he.RGBW&&e[le.DEVICE_TYPE]!==he.RGBWW||(t=[...t,n("Red",o,!0,e[le.E131_UNIVERSE]),n("Green",o+1),n("Blue",o+2)],o+=3),e[le.DEVICE_TYPE]!==he.RGBW&&e[le.DEVICE_TYPE]!==he.RGBWW&&e[le.DEVICE_TYPE]!==he.W&&e[le.DEVICE_TYPE]!==he.WW||(t=[...t,n("Cold White",o,1==o,1==o?e[le.E131_UNIVERSE]:null)],o+=1),e[le.DEVICE_TYPE]!==he.RGBWW&&e[le.DEVICE_TYPE]!==he.WW||(t=[...t,n("Warm White",o)]),t})()))))};class Ce extends ue{url="ws://localhost:8080";constructor(){super(),this.DEVELOPMENT||(this.url="ws://"+this.HOST+":1337"),this.connect()}newWebSocket=()=>(this.websocket=new WebSocket(this.url),this.websocket);close=()=>{this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.close()};connect=()=>{console.log("Attempting connection to WS...");const e=this.newWebSocket();return e.onopen=()=>{console.log("WS connection open")},e.onclose=()=>{console.log("WS connection closed")},e.onerror=e=>{console.log("WS Error: ",e)},e};reconnect=()=>new Promise((e,t)=>{if(this.websocket){let t=this.websocket,n=1;const o=setInterval(()=>{switch(t.readyState){case WebSocket.CLOSED:console.log("Starting reconnect..."),t=this.connect();break;case WebSocket.CLOSING:console.log("WS closing...");break;case WebSocket.CONNECTING:console.log("WS connecting...");break;case WebSocket.OPEN:clearInterval(o),e(!0)}n>=30&&clearInterval(o),n+=1},1e3)}else t()});send=e=>{if(this.websocket)switch(this.websocket.readyState){case WebSocket.OPEN:this.DEVELOPMENT?this.websocket.send(JSON.stringify({type:"echo",payload:"test"})):e&&this.websocket.send(e);break;default:this.reconnect()}}}class Se extends Ce{constructor(){super()}restart=()=>new Promise((e,t)=>{this.DEVELOPMENT?e(!0):this.emptyPOST("restart").then(()=>{e(!0)}).catch(e=>{t(e)})});eraseAll=()=>{this.send("erase")}}const we=({variant:e="page",...t})=>h("div",{id:"lum-loader",class:"lum-loader "+e},h("div",{id:"loader",class:"loader"},"Loading...")),Ie=({config:e={},...t})=>{const[n,o]=$(!1),i=(n,o=!1)=>{if("function"==typeof t.onConfigUpdate)if(oe(n)){const o=ie(n);o&&t.onConfigUpdate({...e,[le.MQTT_IP1]:o.a,[le.MQTT_IP2]:o.b,[le.MQTT_IP3]:o.c,[le.MQTT_IP4]:o.d})}else o&&t.onConfigUpdate({...e})},r=(n,o=!1)=>{var i;"function"==typeof t.onConfigUpdate&&((i=n)&&i.search(/^(?:[a-z0-9\_\-]*\/)*(?:[a-z0-9\_\-]+)+$/g)>-1?t.onConfigUpdate({...e,[le.MQTT_DEVICE_TOPIC]:n}):o&&t.onConfigUpdate({...e}))},s=(n,o=!1)=>{var i;"function"==typeof t.onConfigUpdate&&((i=n)&&i.search(/^(?:[a-z0-9\_\-]*)$/g)>-1?t.onConfigUpdate({...e,[le.MQTT_CLIENT_ID]:n}):o&&t.onConfigUpdate({...e}))};return h(f,null,h("div",{class:"section-action"},h(ye,{onClick:()=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.MQTT_ENABLED]:!e[le.MQTT_ENABLED]})},on:e[le.MQTT_ENABLED]}),h("label",null,"Enable MQTT")),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"clientId"},"Unique Client ID"),h(be,{id:"clientId",disabled:!e[le.MQTT_ENABLED],value:e[le.MQTT_CLIENT_ID]||void 0,maxLength:20,onChange:s,onBlur:e=>{s(e,!0)}}),h("div",{class:"helper-text mt-large"},"Max 20 characters. A unique ID for MQTT broker to identify the device. Alphanumeric characters, underscores, and dashes only. Example: ",h("strong",null,"bedroom_lamp1"))),h("div",{class:"form-group no-margin"},h("label",{for:"topic"},"Home Assistant Auto Discovery"),h(ye,{disabled:!e[le.MQTT_ENABLED],onClick:()=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.MQTT_AUTO_DISCOVERY]:!e[le.MQTT_AUTO_DISCOVERY]})},on:e[le.MQTT_AUTO_DISCOVERY]}),h("div",{class:"helper-text mt-large"},"Will add this device to your entites in Home Assistant automatically.",h("br",null)," See"," ",h("a",{href:"https://www.home-assistant.io/docs/mqtt/discovery/",target:"_blank"},"Home Assistant MQTT Discovery")," ","for details.")),h("div",{class:"form-group"},h("label",{for:"user"},"User"),h(be,{id:"user",disabled:!e[le.MQTT_ENABLED],maxLength:40,value:e[le.MQTT_USER]||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.MQTT_USER]:n})}}),h("div",{class:"helper-text"},"Max 40 characters")),h("div",{class:"form-group"},h("label",{for:"password"},"Password"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(be,{id:"password",maxLength:20,disabled:!e[le.MQTT_ENABLED],type:n?"string":"password",value:e[le.MQTT_PASSWORD]||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.MQTT_PASSWORD]:n})}}),h("div",{class:"helper-text"},"Max 20 characters")),h("button",{type:"button",class:"ml-small",onClick:()=>{o(!n)}},n?"Hide":"Show"))),h("div",{class:"form-group"},h("label",{for:"ip"},"MQTT Server IP"),h(be,{disabled:!e[le.MQTT_ENABLED],value:re(e[le.MQTT_IP1],e[le.MQTT_IP2],e[le.MQTT_IP3],e[le.MQTT_IP4])||"",onChange:i,onBlur:e=>{i(e,!0)}})),h("div",{class:"form-group"},h("label",{for:"port"},"Port"),h(be,{type:"number",disabled:!e[le.MQTT_ENABLED],value:e[le.MQTT_PORT]||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&t.onConfigUpdate({...e,[le.MQTT_PORT]:n})}})))),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"topic"},"Device Base Topic"),h(be,{id:"topic",maxLength:40,disabled:!e[le.MQTT_ENABLED],value:e[le.MQTT_DEVICE_TOPIC]||void 0,onChange:r,onBlur:e=>{r(e,!0)}})),h("div",{class:"form-group"},h("label",{for:"topic"}),h("div",{class:"helper-text mt-large"},"Max 40 characters. The topic that all incoming and outgoing sub topics will be based on for this device. Example:"," ",h("strong",null,"upstairs/bedroom/lamp1"))))),e[le.MQTT_DEVICE_TOPIC]&&h("section",null,h("div",{class:"form-group no-margin"},h("label",null,"MQTT Topics"),h("table",null,h("tr",{class:"header-row"},h("th",null,"Topic"),h("th",null,"Message"),h("th",{width:"100%"},"Description")),h("tr",{class:"first-row"},h("td",null,h(ce,{text:e[le.MQTT_DEVICE_TOPIC]+"/avail"})),h("td",null,h(ce,{variant:"basic",text:"online"})),h("td",null,"The birth message sent to the broker when Lumenator comes online.")),h("tr",null,h("td",null),h("td",null,h(ce,{variant:"basic",text:"offline"})),h("td",null,"The message sent as the last will and testament.")),h("tr",{class:"new-group"},h("td",null,h(ce,{text:e[le.MQTT_DEVICE_TOPIC]+"/state"})),h("td",null,h(ce,{variant:"basic",text:"JSON"})),h("td",null,"This is the topic your broker should subscribe to for state updates. This follows the Home Assistant JSON schema for state.",h("br",null),h("br",null)," See"," ",h("a",{href:"https://www.home-assistant.io/integrations/light.mqtt/#json-schema",target:"_blank"},"MQTT Light - JSON Schema")," ","for more details.")),h("tr",{class:"new-group"},h("td",null,h(ce,{text:e[le.MQTT_DEVICE_TOPIC]+"/set"})),h("td",null,h(ce,{variant:"basic",text:"JSON"})),h("td",null,"This is the topic Lumenator is subscribed to for commands. This follows the Home Assistant JSON schema for sending commands.",h("br",null),h("br",null)," See"," ",h("a",{href:"https://www.home-assistant.io/integrations/light.mqtt/#json-schema",target:"_blank"},"MQTT Light - JSON Schema")," ","for more details."))))))};
/*!
 * iro.js v5.2.3
 * 2016-2020 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */
var Ae,We,Oe,ke,xe,Ne={},Pe=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function Me(e,t){for(var n in t)e[n]=t[n];return e}function De(e){var t=e.parentNode;t&&t.removeChild(e)}function Ge(e,t,n){var o,i,r,s,l=arguments;if(t=Me({},t),arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(l[o]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===t[i]&&(t[i]=e.defaultProps[i]);return s=t.key,null!=(r=t.ref)&&delete t.ref,null!=s&&delete t.key,Be(e,t,s,r)}function Be(e,t,n,o){var i={type:e,props:t,key:n,ref:o,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return Ae.vnode&&Ae.vnode(i),i}function Ue(e){return e.children}function Le(e,t){this.props=e,this.context=t}function Fe(e,t){if(null==t)return e.__p?Fe(e.__p,e.__p.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Fe(e):null}function He(e){var t,n;if(null!=(e=e.__p)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return He(e)}}function Ke(e){(!e.__d&&(e.__d=!0)&&1===We.push(e)||ke!==Ae.debounceRendering)&&(ke=Ae.debounceRendering,(Ae.debounceRendering||Oe)(Qe))}function Qe(){var e,t,n,o,i,r,s,l;for(We.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=We.pop();)e.__d&&(n=void 0,o=void 0,r=(i=(t=e).__v).__e,s=t.__P,l=t.u,t.u=!1,s&&(n=[],o=Je(s,i,Me({},i),t.__n,void 0!==s.ownerSVGElement,null,n,l,null==r?Fe(i):r),qe(n,i),o!=r&&He(i)))}function Ve(e,t,n,o,i,r,s,l,a){var c,u,h,d,f,_,p,g=n&&n.__k||Pe,v=g.length;if(l==Ne&&(l=null!=r?r[0]:v?Fe(n,0):null),c=0,t.__k=Ye(t.__k,(function(n){if(null!=n){if(n.__p=t,n.__b=t.__b+1,null===(h=g[c])||h&&n.key==h.key&&n.type===h.type)g[c]=void 0;else for(u=0;u<v;u++){if((h=g[u])&&n.key==h.key&&n.type===h.type){g[u]=void 0;break}h=null}if(d=Je(e,n,h=h||Ne,o,i,r,s,null,l,a),(u=n.ref)&&h.ref!=u&&(p||(p=[])).push(u,n.__c||d,n),null!=d){if(null==_&&(_=d),null!=n.l)d=n.l,n.l=null;else if(r==h||d!=l||null==d.parentNode){e:if(null==l||l.parentNode!==e)e.appendChild(d);else{for(f=l,u=0;(f=f.nextSibling)&&u<v;u+=2)if(f==d)break e;e.insertBefore(d,l)}"option"==t.type&&(e.value="")}l=d.nextSibling,"function"==typeof t.type&&(t.l=d)}}return c++,n})),t.__e=_,null!=r&&"function"!=typeof t.type)for(c=r.length;c--;)null!=r[c]&&De(r[c]);for(c=v;c--;)null!=g[c]&&Ze(g[c],g[c]);if(p)for(c=0;c<p.length;c++)Xe(p[c],p[++c],p[++c])}function Ye(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ye(e[o],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return Be(null,e,null,null);if(null!=e.__e||null!=e.__c){var t=Be(e.type,e.props,e.key,null);return t.__e=e.__e,t}return e}(e)):e);return n}function $e(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===Re.test(t)?n+"px":null==n?"":n}function je(e,t,n,o,i){var r,s,l,a,c;if("key"===(t=i?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(r=e.style,"string"==typeof n)r.cssText=n;else{if("string"==typeof o&&(r.cssText="",o=null),o)for(s in o)n&&s in n||$e(r,s,"");if(n)for(l in n)o&&n[l]===o[l]||$e(r,l,n[l])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(o||e.addEventListener(t,ze,a),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,ze,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function ze(e){return this.t[e.type](Ae.event?Ae.event(e):e)}function Je(e,t,n,o,i,r,s,l,a,c){var u,h,d,f,_,p,g,v,b,m,y=t.type;if(void 0!==t.constructor)return null;(u=Ae.__b)&&u(t);try{e:if("function"==typeof y){if(v=t.props,b=(u=y.contextType)&&o[u.__c],m=u?b?b.props.value:u.__p:o,n.__c?g=(h=t.__c=n.__c).__p=h.__E:("prototype"in y&&y.prototype.render?t.__c=h=new y(v,m):(t.__c=h=new Le(v,m),h.constructor=y,h.render=et),b&&b.sub(h),h.props=v,h.state||(h.state={}),h.context=m,h.__n=o,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=y.getDerivedStateFromProps&&Me(h.__s==h.state?h.__s=Me({},h.__s):h.__s,y.getDerivedStateFromProps(v,h.__s)),d)null==y.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&s.push(h);else{if(null==y.getDerivedStateFromProps&&null==l&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(v,m),!l&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(v,h.__s,m)){for(h.props=v,h.state=h.__s,h.__d=!1,h.__v=t,t.__e=null!=a?a!==n.__e?a:n.__e:null,t.__k=n.__k,u=0;u<t.__k.length;u++)t.__k[u]&&(t.__k[u].__p=t);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(v,h.__s,m)}for(f=h.props,_=h.state,h.context=m,h.props=v,h.state=h.__s,(u=Ae.__r)&&u(t),h.__d=!1,h.__v=t,h.__P=e,u=h.render(h.props,h.state,h.context),t.__k=Ye(null!=u&&u.type==Ue&&null==u.key?u.props.children:u),null!=h.getChildContext&&(o=Me(Me({},o),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(p=h.getSnapshotBeforeUpdate(f,_)),Ve(e,t,n,o,i,r,s,a,c),h.base=t.__e;u=h.__h.pop();)h.__s&&(h.state=h.__s),u.call(h);d||null==f||null==h.componentDidUpdate||h.componentDidUpdate(f,_,p),g&&(h.__E=h.__p=null)}else t.__e=function(e,t,n,o,i,r,s,l){var a,c,u,h,d=n.props,f=t.props;if(i="svg"===t.type||i,null==e&&null!=r)for(a=0;a<r.length;a++)if(null!=(c=r[a])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,r[a]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),r=null}return null===t.type?d!==f&&(null!=r&&(r[r.indexOf(e)]=null),e.data=f):t!==n&&(null!=r&&(r=Pe.slice.call(e.childNodes)),u=(d=n.props||Ne).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,l||(h||u)&&(h&&u&&h.__html==u.__html||(e.innerHTML=h&&h.__html||"")),function(e,t,n,o,i){var r;for(r in n)r in t||je(e,r,null,n[r],o);for(r in t)i&&"function"!=typeof t[r]||"value"===r||"checked"===r||n[r]===t[r]||je(e,r,t[r],n[r],o)}(e,f,d,i,l),t.__k=t.props.children,h||Ve(e,t,n,o,"foreignObject"!==t.type&&i,r,s,Ne,l),l||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))),e}(n.__e,t,n,o,i,r,s,c);(u=Ae.diffed)&&u(t)}catch(e){Ae.__e(e,t,n)}return t.__e}function qe(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(e){Ae.__e(e,n.__v)}Ae.__c&&Ae.__c(t)}function Xe(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Ae.__e(e,n)}}function Ze(e,t,n){var o,i,r;if(Ae.unmount&&Ae.unmount(e),(o=e.ref)&&Xe(o,null,t),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.l=null,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){Ae.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Ze(o[r],t,n);null!=i&&De(i)}function et(e,t,n){return this.constructor(e,n)}Ae={},Le.prototype.setState=function(e,t){var n=this.__s!==this.state&&this.__s||(this.__s=Me({},this.state));("function"!=typeof e||(e=e(n,this.props)))&&Me(n,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),Ke(this))},Le.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,Ke(this))},Le.prototype.render=Ue,We=[],Oe="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ke=Ae.debounceRendering,Ae.__e=function(e,t,n){for(var o;t=t.__p;)if((o=t.__c)&&!o.__p)try{if(o.constructor&&null!=o.constructor.getDerivedStateFromError)o.setState(o.constructor.getDerivedStateFromError(e));else{if(null==o.componentDidCatch)continue;o.componentDidCatch(e)}return Ke(o.__E=o)}catch(t){e=t}throw e},xe=Ne;var tt="[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?",nt=new RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),ot=new RegExp("rgba"+tt),it=new RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rt=new RegExp("hsla"+tt),st=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),lt=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),at=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),ct=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),ut=Math.log,ht=Math.round,dt=Math.floor;function ft(e,t,n){return Math.min(Math.max(e,t),n)}function _t(e,t){var n=e.indexOf("%")>-1,o=parseFloat(e);return n?t/100*o:o}function pt(e){return parseInt(e,16)}function gt(e){return e.toString(16).padStart(2,"0")}var vt=function(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=Object.assign({},this.$)},bt={hsv:{configurable:!0},hsva:{configurable:!0},hue:{configurable:!0},saturation:{configurable:!0},value:{configurable:!0},alpha:{configurable:!0},kelvin:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0},rgb:{configurable:!0},rgba:{configurable:!0},hsl:{configurable:!0},hsla:{configurable:!0},rgbString:{configurable:!0},rgbaString:{configurable:!0},hexString:{configurable:!0},hex8String:{configurable:!0},hslString:{configurable:!0},hslaString:{configurable:!0}};vt.prototype.set=function(e){if("string"==typeof e)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else{if("object"!=typeof e)throw new Error("Invalid color value");e instanceof vt?this.hsv=e.hsv:"object"==typeof e&&"r"in e&&"g"in e&&"b"in e?this.rgb=e:"object"==typeof e&&"h"in e&&"s"in e&&"v"in e?this.hsv=e:"object"==typeof e&&"h"in e&&"s"in e&&"l"in e&&(this.hsl=e)}},vt.prototype.setChannel=function(e,t,n){var o;this[e]=Object.assign({},this[e],((o={})[t]=n,o))},vt.prototype.reset=function(){this.hsva=this.initialValue},vt.prototype.clone=function(){return new vt(this)},vt.prototype.unbind=function(){this.onChange=void 0},vt.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,o=e.v/100,i=dt(t),r=t-i,s=o*(1-n),l=o*(1-r*n),a=o*(1-(1-r)*n),c=i%6,u=[a,o,o,l,s,s][c],h=[s,s,a,o,o,l][c];return{r:ft(255*[o,l,s,s,a,o][c],0,255),g:ft(255*u,0,255),b:ft(255*h,0,255)}},vt.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.max(t,n,o),r=Math.min(t,n,o),s=i-r,l=0,a=i,c=0===i?0:s/i;switch(i){case r:l=0;break;case t:l=(n-o)/s+(n<o?6:0);break;case n:l=(o-t)/s+2;break;case o:l=(t-n)/s+4}return{h:60*l%360,s:ft(100*c,0,100),v:ft(100*a,0,100)}},vt.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,o=(2-t)*n,i=o<=1?o:2-o,r=i<1e-9?0:t*n/i;return{h:e.h,s:ft(100*r,0,100),l:ft(50*o,0,100)}},vt.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100,o=t+n<1e-9?0:2*n/(t+n);return{h:e.h,s:ft(100*o,0,100),v:ft((t+n)/2,0,100)}},vt.kelvinToRgb=function(e){var t,n,o,i=e/100;return i<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*ut(n),o=i<20?0:.8274096064007395*(o=i-10)-254.76935184120902+115.67994401066147*ut(o)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*ut(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*ut(n),o=255),{r:ft(dt(t),0,255),g:ft(dt(n),0,255),b:ft(dt(o),0,255)}},vt.rgbToKelvin=function(e){for(var t,n=e.r,o=e.b,i=1e3,r=4e4;r-i>.4;){var s=vt.kelvinToRgb(t=.5*(r+i));s.b/s.r>=o/n?r=t:i=t}return t},bt.hsv.get=function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},bt.hsv.set=function(e){var t=this.$;if(e=Object.assign({},t,e),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var o in t)n[o]=e[o]!=t[o];this.$=e,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=e},bt.hsva.get=function(){return Object.assign({},this.$)},bt.hsva.set=function(e){this.hsv=e},bt.hue.get=function(){return this.$.h},bt.hue.set=function(e){this.hsv={h:e}},bt.saturation.get=function(){return this.$.s},bt.saturation.set=function(e){this.hsv={s:e}},bt.value.get=function(){return this.$.v},bt.value.set=function(e){this.hsv={v:e}},bt.alpha.get=function(){return this.$.a},bt.alpha.set=function(e){this.hsv=Object.assign({},this.hsv,{a:e})},bt.kelvin.get=function(){return vt.rgbToKelvin(this.rgb)},bt.kelvin.set=function(e){this.rgb=vt.kelvinToRgb(e)},bt.red.get=function(){return this.rgb.r},bt.red.set=function(e){this.rgb=Object.assign({},this.rgb,{r:e})},bt.green.get=function(){return this.rgb.g},bt.green.set=function(e){this.rgb=Object.assign({},this.rgb,{g:e})},bt.blue.get=function(){return this.rgb.b},bt.blue.set=function(e){this.rgb=Object.assign({},this.rgb,{b:e})},bt.rgb.get=function(){var e=vt.hsvToRgb(this.$),t=e.r,n=e.g,o=e.b;return{r:ht(t),g:ht(n),b:ht(o)}},bt.rgb.set=function(e){this.hsv=Object.assign({},vt.rgbToHsv(e),{a:void 0===e.a?1:e.a})},bt.rgba.get=function(){return Object.assign({},this.rgb,{a:this.alpha})},bt.rgba.set=function(e){this.rgb=e},bt.hsl.get=function(){var e=vt.hsvToHsl(this.$),t=e.h,n=e.s,o=e.l;return{h:ht(t),s:ht(n),l:ht(o)}},bt.hsl.set=function(e){this.hsv=Object.assign({},vt.hslToHsv(e),{a:void 0===e.a?1:e.a})},bt.hsla.get=function(){return Object.assign({},this.hsl,{a:this.alpha})},bt.hsla.set=function(e){this.hsl=e},bt.rgbString.get=function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},bt.rgbString.set=function(e){var t,n,o,i,r=1;if((t=nt.exec(e))?(n=_t(t[1],255),o=_t(t[2],255),i=_t(t[3],255)):(t=ot.exec(e))&&(n=_t(t[1],255),o=_t(t[2],255),i=_t(t[3],255),r=_t(t[4],1)),!t)throw new Error("Invalid rgb string");this.rgb={r:n,g:o,b:i,a:r}},bt.rgbaString.get=function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},bt.rgbaString.set=function(e){this.rgbString=e},bt.hexString.get=function(){var e=this.rgb;return"#"+gt(e.r)+gt(e.g)+gt(e.b)},bt.hexString.set=function(e){var t,n,o,i,r=255;if((t=st.exec(e))?(n=17*pt(t[1]),o=17*pt(t[2]),i=17*pt(t[3])):(t=lt.exec(e))?(n=17*pt(t[1]),o=17*pt(t[2]),i=17*pt(t[3]),r=17*pt(t[4])):(t=at.exec(e))?(n=pt(t[1]),o=pt(t[2]),i=pt(t[3])):(t=ct.exec(e))&&(n=pt(t[1]),o=pt(t[2]),i=pt(t[3]),r=pt(t[4])),!t)throw new Error("Invalid hex string");this.rgb={r:n,g:o,b:i,a:r/255}},bt.hex8String.get=function(){var e=this.rgba;return"#"+gt(e.r)+gt(e.g)+gt(e.b)+gt(dt(255*e.a))},bt.hex8String.set=function(e){this.hexString=e},bt.hslString.get=function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},bt.hslString.set=function(e){var t,n,o,i,r=1;if((t=it.exec(e))?(n=_t(t[1],360),o=_t(t[2],100),i=_t(t[3],100)):(t=rt.exec(e))&&(n=_t(t[1],360),o=_t(t[2],100),i=_t(t[3],100),r=_t(t[4],1)),!t)throw new Error("Invalid hsl string");this.hsl={h:n,s:o,l:i,a:r}},bt.hslaString.get=function(){var e=this.hsla;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},bt.hslaString.set=function(e){this.hslString=e},Object.defineProperties(vt.prototype,bt);var mt;function yt(e){var t=e.width,n=e.sliderSize,o=e.borderWidth,i=e.handleRadius,r=e.padding,s=e.sliderShape,l="horizontal"===e.layoutDirection;return n=n||2*r+2*i+2*o,"circle"===s?{handleStart:e.padding+e.handleRadius,handleRange:t-2*r-2*i-2*o,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-o/2}:{handleStart:n/2,handleRange:t-n,radius:n/2,x:0,y:0,width:l?n:t,height:l?t:n}}function Tt(e,t){var n=yt(e),o=n.width,i=n.height,r=n.handleRange,s=n.handleStart,l="horizontal"===e.layoutDirection,a=l?o/2:i/2,c=s+function(e,t){var n=t.hsva,o=t.rgb;switch(e.sliderType){case"red":return o.r/2.55;case"green":return o.g/2.55;case"blue":return o.b/2.55;case"alpha":return 100*n.a;case"kelvin":var i=e.minTemperature,r=e.maxTemperature-i,s=(t.kelvin-i)/r*100;return Math.max(0,Math.min(s,100));case"hue":return n.h/=3.6;case"saturation":return n.s;case"value":default:return n.v}}(e,t)/100*r;return l&&(c=-1*c+r+2*s),{x:l?a:c,y:l?c:a}}function Et(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function Ct(e,t,n){var o=e.wheelAngle,i=e.wheelDirection;return((t=!n&&"clockwise"===i||n&&"anticlockwise"===i?(n?180:360)-(o-t):o+t)%360+360)%360}function St(e,t,n){var o=Et(e),i=o.cx,r=o.cy,s=e.width/2-e.padding-e.handleRadius-e.borderWidth;t=i-t,n=r-n;var l=Ct(e,Math.atan2(-n,-t)*(180/Math.PI)),a=Math.min(Math.sqrt(t*t+n*n),s);return{h:Math.round(l),s:Math.round(100/s*a)}}function wt(e){var t=e.width;return{width:t,height:t,radius:e.padding+e.handleRadius}}function It(e,t,n){var o=wt(e),i=o.width,r=o.height,s=o.radius,l=(t-s)/(i-2*s)*100,a=(n-s)/(r-2*s)*100;return{s:Math.max(0,Math.min(l,100)),v:Math.max(0,Math.min(100-a,100))}}function At(e){mt||(mt=document.getElementsByTagName("base"));var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),o=/iPhone|iPod|iPad/i.test(t),i=window.location;return(n||o)&&mt.length>0?i.protocol+"//"+i.host+i.pathname+i.search+e:e}function Wt(e,t,n,o,i){var r=i-o<=180?0:1;return o*=Math.PI/180,i*=Math.PI/180,"M "+(e+n*Math.cos(i))+" "+(t+n*Math.sin(i))+" A "+n+" "+n+" 0 "+r+" 0 "+(e+n*Math.cos(o))+" "+(t+n*Math.sin(o))}function Ot(e,t,n,o){for(var i=0;i<o.length;i++){var r=o[i].x-t,s=o[i].y-n;if(Math.sqrt(r*r+s*s)<e.handleRadius)return i}return null}var kt=["mousemove","touchmove","mouseup","touchend"],xt=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(e){var t=this.handleEvent.bind(this),n={onMouseDown:t,ontouchstart:t},o="horizontal"===e.layoutDirection,i=null===e.margin?e.sliderMargin:e.margin,r={overflow:"visible",display:o?"inline-block":"block"};return e.index>0&&(r[o?"marginLeft":"marginTop"]=i),Ge(Ue,null,e.children(this.uid,n,r))},t.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,o=this.base.getBoundingClientRect();e.preventDefault();var i=e.touches?e.changedTouches[0]:e,r=i.clientX-o.left,s=i.clientY-o.top;switch(e.type){case"mousedown":case"touchstart":kt.forEach((function(e){document.addEventListener(e,t,{passive:!1})})),n(r,s,0);break;case"mousemove":case"touchmove":n(r,s,1);break;case"mouseup":case"touchend":n(r,s,2),kt.forEach((function(e){document.removeEventListener(e,t)}))}},t}(Le);function Nt(e){var t=e.r,n=e.url;return Ge("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),x:e.x,y:e.y,style:{overflow:"visible"}},n&&Ge("use",Object.assign({xlinkHref:At(n)},e.props)),!n&&Ge("circle",{r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&Ge("circle",{r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function Pt(e){var t=e.activeIndex,n=void 0!==t&&t<e.colors.length?e.colors[t]:e.color,o=yt(e),i=o.width,r=o.height,s=o.radius,l=Tt(e,n),a=function(e,t){var n=t.hsv,o=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+o.g+","+o.b+")"],[100,"rgb(255,"+o.g+","+o.b+")"]];case"green":return[[0,"rgb("+o.r+",0,"+o.b+")"],[100,"rgb("+o.r+",255,"+o.b+")"]];case"blue":return[[0,"rgb("+o.r+","+o.g+",0)"],[100,"rgb("+o.r+","+o.g+",255)"]];case"alpha":return[[0,"rgba("+o.r+","+o.g+","+o.b+",0)"],[100,"rgb("+o.r+","+o.g+","+o.b+")"]];case"kelvin":for(var i=[],r=e.minTemperature,s=e.maxTemperature,l=s-r,a=r,c=0;a<s;a+=l/8,c+=1){var u=vt.kelvinToRgb(a),h=u.r,d=u.g,f=u.b;i.push([12.5*c,"rgb("+h+","+d+","+f+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var _=vt.hsvToHsl({h:n.h,s:0,v:n.v}),p=vt.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+_.h+","+_.s+"%,"+_.l+"%)"],[100,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"]];case"value":default:var g=vt.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]]}}(e,n),c="alpha"===e.sliderType;return Ge(xt,Object.assign({},e,{onInput:function(t,o,i){var r=function(e,t,n){var o,i=yt(e),r=i.handleRange,s=i.handleStart;o="horizontal"===e.layoutDirection?-1*n+r+s:t-s,o=Math.max(Math.min(o,r),0);var l=Math.round(100/r*o);switch(e.sliderType){case"kelvin":var a=e.minTemperature;return a+(e.maxTemperature-a)*(l/100);case"alpha":return l/100;case"hue":return 3.6*l;case"red":case"blue":case"green":return 2.55*l;default:return l}}(e,t,o);e.parent.inputActive=!0,n[e.sliderType]=r,e.onInput(i)}}),(function(t,o,u){return Ge("svg",Object.assign({},o,{className:"IroSlider",width:i,height:r,style:u}),Ge("defs",null,Ge("linearGradient",Object.assign({id:"g"+t},function(e){var t="horizontal"===e.layoutDirection;return{x1:"0%",y1:t?"100%":"0%",x2:t?"0%":"100%",y2:"0%"}}(e)),a.map((function(e){return Ge("stop",{offset:e[0]+"%","stop-color":e[1]})}))),c&&Ge("pattern",{id:"b"+t,width:"8",height:"8",patternUnits:"userSpaceOnUse"},Ge("rect",{x:"0",y:"0",width:"8",height:"8",fill:"#fff"}),Ge("rect",{x:"0",y:"0",width:"4",height:"4",fill:"#ccc"}),Ge("rect",{x:"4",y:"4",width:"4",height:"4",fill:"#ccc"})),c&&Ge("pattern",{id:"f"+t,width:"100%",height:"100%"},Ge("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+At("#b"+t)+")"}),Ge("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+At("#g"+t)+")"}))),Ge("rect",{className:"IroSliderBg",rx:s,ry:s,x:e.borderWidth/2,y:e.borderWidth/2,width:i-e.borderWidth,height:r-e.borderWidth,"stroke-width":e.borderWidth,stroke:e.borderColor,fill:"url("+At((c?"#f":"#g")+t)+")"}),Ge(Nt,{isActive:!0,index:n.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:l.x,y:l.y}))}))}function Rt(e){var t=wt(e),n=t.width,o=t.height,i=t.radius,r=e.colors,s=e.parent,l=e.activeIndex,a=void 0!==l&&l<e.colors.length?e.colors[l]:e.color,c=[[[0,"#fff"],[100,"hsl("+a.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],u=r.map((function(t){return function(e,t){var n=wt(e),o=n.width,i=n.height,r=n.radius,s=t.hsv,l=r,a=o-2*r,c=i-2*r;return{x:l+s.s/100*a,y:l+(c-s.v/100*c)}}(e,t)}));return Ge(xt,Object.assign({},e,{onInput:function(t,n,o){if(0===o){var i=Ot(e,t,n,u);null!==i?s.setActiveColor(i):(s.inputActive=!0,a.hsv=It(e,t,n),e.onInput(o))}else 1===o&&(s.inputActive=!0,a.hsv=It(e,t,n));e.onInput(o)}}),(function(t,s,l){return Ge("svg",Object.assign({},s,{className:"IroBox",width:n,height:o,style:l}),Ge("defs",null,Ge("linearGradient",{id:"s"+t,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},c[0].map((function(e){return Ge("stop",{offset:e[0]+"%","stop-color":e[1]})}))),Ge("linearGradient",{id:"l"+t,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c[1].map((function(e){return Ge("stop",{offset:e[0]+"%","stop-color":e[1]})}))),Ge("pattern",{id:"f"+t,width:"100%",height:"100%"},Ge("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+At("#s"+t)+")"}),Ge("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+At("#l"+t)+")"}))),Ge("rect",{rx:i,ry:i,x:e.borderWidth/2,y:e.borderWidth/2,width:n-e.borderWidth,height:o-e.borderWidth,"stroke-width":e.borderWidth,stroke:e.borderColor,fill:"url("+At("#f"+t)+")"}),r.filter((function(e){return e!==a})).map((function(t){return Ge(Nt,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[t.index].x,y:u[t.index].y})})),Ge(Nt,{isActive:!0,index:a.index,fill:a.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[a.index].x,y:u[a.index].y}))}))}Nt.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},Pt.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var Mt=Array.apply(null,{length:360}).map((function(e,t){return t}));function Dt(e){var t=Et(e),n=t.width,o=t.radius,i=t.cx,r=t.cy,s=e.colors,l=e.borderWidth,a=e.parent,c=e.color,u=c.hsv,h=s.map((function(t){return function(e,t){var n=t.hsv,o=Et(e),i=o.cx,r=o.cy,s=e.width/2-e.padding-e.handleRadius-e.borderWidth,l=(180+Ct(e,n.h,!0))*(Math.PI/180),a=n.s/100*s,c="clockwise"===e.wheelDirection?-1:1;return{x:i+a*Math.cos(l)*c,y:r+a*Math.sin(l)*c}}(e,t)}));return Ge(xt,Object.assign({},e,{onInput:function(t,n,o){if(0===o){var i=Ot(e,t,n,h);null!==i?a.setActiveColor(i):(a.inputActive=!0,c.hsv=St(e,t,n),e.onInput(o))}else 1===o&&(a.inputActive=!0,c.hsv=St(e,t,n));e.onInput(o)}}),(function(t,a,d){return Ge("svg",Object.assign({},a,{className:"IroWheel",width:n,height:n,style:d}),Ge("defs",null,Ge("radialGradient",{id:t},Ge("stop",{offset:"0%","stop-color":"#fff"}),Ge("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"}))),Ge("g",{className:"IroWheelHue","stroke-width":o,fill:"none"},Mt.map((function(t){return Ge("path",{key:t,d:Wt(i,r,o/2,t,t+1.5),stroke:"hsl("+Ct(e,t)+", 100%, 50%)"})}))),Ge("circle",{className:"IroWheelSaturation",cx:i,cy:r,r:o,fill:"url("+At("#"+t)+")"}),e.wheelLightness&&Ge("circle",{className:"IroWheelLightness",cx:i,cy:r,r:o,fill:"#000",opacity:1-u.v/100}),Ge("circle",{className:"IroWheelBorder",cx:i,cy:r,r:o,fill:"none",stroke:e.borderColor,"stroke-width":l}),s.filter((function(e){return e!==c})).map((function(t){return Ge(Nt,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[t.index].x,y:h[t.index].y})})),Ge(Nt,{isActive:!0,index:c.index,fill:c.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[c.index].x,y:h[c.index].y}))}))}var Gt=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(t.colors.length>0?t.colors:[t.color]).forEach((function(e){return n.addColor(e)})),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var n=new vt(e,this.onColorChange.bind(this));this.colors.splice(t,0,n),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",n)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e){var t=this;this.colors.forEach((function(e){return e.unbind()})),this.colors=[],e.forEach((function(e){return t.addColor(e)})),this.setActiveColor(0),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var n=this,o=this.events;(Array.isArray(e)?e:[e]).forEach((function(e){(o[e]||(o[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach((function(e){t.apply(null,e)})),n.deferredEvents[e]=[])}))},t.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach((function(e){var o=n.events[e];o&&o.splice(o.indexOf(t),1)}))},t.prototype.emit=function(e){for(var t=this,n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];var i=this.activeEvents,r=!!i.hasOwnProperty(e)&&i[e];if(!r){i[e]=!0;var s=this.events[e]||[];s.forEach((function(e){return e.apply(t,n)})),i[e]=!1}},t.prototype.deferredEmit=function(e){for(var t,n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];var i=this.deferredEvents;(t=this).emit.apply(t,[e].concat(n)),(i[e]||(i[e]=[])).push(n)},t.prototype.setOptions=function(e){this.setState(Object.assign({},this.state,e))},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach((function(e){return e.reset()})),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e){0===e?this.emit("input:start",this.color):1===e?this.emit("input:move",this.color):2===e&&this.emit("input:end",this.color)},t.prototype.render=function(e,t){var n=this,o=t.layout;return Array.isArray(o)||(o=[{component:Dt},{component:Pt}],t.transparency&&o.push({component:Pt,options:{sliderType:"alpha"}})),Ge("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},o.map((function(e,o){var i=e.component,r=e.options;return Ge(i,Object.assign({},t,r,{ref:void 0,onInput:n.emitInputEvent.bind(n),parent:n,index:o}))})))},t}(Le);Gt.defaultProps=Object.assign({},{width:300,height:300,handleRadius:8,handleSvg:null,handleProps:{x:0,y:0},color:"#fff",colors:[],borderColor:"#fff",borderWidth:0,wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",layoutDirection:"vertical",sliderSize:null,sliderMargin:12,padding:6},{colors:[],display:"block",id:null,layout:"default",margin:null});var Bt,Ut,Lt,Ft,Ht,Kt=((Ut=function(e,t){var n,o,i,r,s,l,a,c=document.createElement("div");function u(){var t=e instanceof Element?e:document.querySelector(e);t.appendChild(n.base),n.onMount(t)}return o=Ge(Bt,Object.assign({},{ref:function(e){return n=e}},t)),i=c,Ae.__p&&Ae.__p(o,i),l=(s=r===xe)?null:r&&r.__k||i.__k,o=Ge(Ue,null,[o]),a=[],Je(i,s?i.__k=o:(r||i).__k=o,l||Ne,Ne,void 0!==i.ownerSVGElement,r&&!s?[r]:l?null:Pe.slice.call(i.childNodes),a,!1,r||Ne,s),qe(a,o),"loading"!==document.readyState?u():document.addEventListener("DOMContentLoaded",u),n}).prototype=(Bt=Gt).prototype,Object.assign(Ut,Bt),Ut.__component=Bt,Ut);(Ht=Lt||(Lt={})).version="5.2.3",Ht.Color=vt,Ht.ColorPicker=Kt,(Ft=Ht.ui||(Ht.ui={})).h=Ge,Ft.ComponentBase=xt,Ft.Handle=Nt,Ft.Slider=Pt,Ft.Wheel=Dt,Ft.Box=Rt;var Qt=Lt;const Vt=e=>{const[n,o]=$(null),[i,r]=$(null);var s,l,a;s=()=>{const t=Qt.ColorPicker("#rgb-color-picker",{borderWidth:2,color:e.rgbColor||"#FFFFFF",layout:[{component:Qt.ui.Wheel,options:{borderColor:"#d1d1d1"}},{component:Qt.ui.Slider,options:{borderColor:"#d1d1d1",sliderType:"value"}}]}),n=Qt.ColorPicker("#white-color-picker",{borderWidth:2,color:e.whiteColor||"#FFFFFF",layout:[{component:Qt.ui.Slider,options:{borderColor:"#d1d1d1",minTemperature:4e3,maxTemperature:9e3,sliderType:"kelvin",sliderShape:"circle"}}]}),i=Qt.ColorPicker("#white-value-picker",{borderWidth:2,color:e.whiteValueColor||"#FFFFFF",layout:[{component:Qt.ui.Slider,options:{borderColor:"#d1d1d1",sliderType:"value"}}]});o(n.color.kelvin),r(n.color.value),t.on("color:change",e=>{f(_e.RGB),u(e.rgb)}),t.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"rgb",color:t.rgb})}),n.on("color:change",e=>{f(_e.WHITE),d({kelvin:e.kelvin,value:i.color.value}),o(e.kelvin),r(e.value)}),n.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"white",color:t.rgb})}),i.on("color:change",e=>{f(_e.WHITE),d({kelvin:n.color.kelvin,value:e.value}),o(e.kelvin),r(e.value)}),i.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"whiteValue",color:t.rgb})})},l=[],a=Y(D++,4),!t.__s&&Z(a.__H,l)&&(a.__=s,a.__H=l,G.__h.push(a));const c=(e,t)=>("00"+e).slice(("00"+e).length-t),u=t=>{const n=c(t.r,3),o=c(t.g,3),i=c(t.b,3);e.webSocketService&&e.webSocketService.send(`rgbctrl:r:${n}:g:${o}:b:${i}`)},d=t=>{const n=t.value/100,o=t.kelvin-4e3,i=Math.round(o/5e3*100)/100,r=Math.round(255*i),s=255-r<0?0:255-r,l=c((r*n).toFixed(0),3),a=c((s*n).toFixed(0),3);e.webSocketService&&e.webSocketService.send(`whitectrl:w:${l}:ww:${a}`)},f=t=>{"function"==typeof e.onControlModeToggle&&(e.controlMode!==t?(e.onControlModeToggle(t),e.rgbColor&&t===_e.RGB&&u(e.rgbColor),n&&i&&t===_e.WHITE&&d({kelvin:n,value:i})):e.onControlModeToggle(_e.STANDBY))};return h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"modeRgb"},"RGB Test Mode"),h(ye,{on:e.controlMode===_e.RGB,onClick:()=>{f(_e.RGB)}}),h("div",{class:"color-picker"},h("div",{id:"rgb-color-picker"})),e.controlMode===_e.RGB&&h(te,{icon:R.INFO,text:"While RGB test mode is enabled, Lumenator will test your selection. If Lumenator receives commands from other sources such as MQTT, the test will be overidden."})),h("div",{class:"form-group no-margin"},h("label",{for:"modeWhite"},"White Test Mode"),h(ye,{on:e.controlMode===_e.WHITE,onClick:()=>{f(_e.WHITE)}}),h("div",{class:"color-picker"},h("div",{id:"white-color-picker"}),h("div",{id:"white-value-picker"})),e.controlMode===_e.WHITE&&h(te,{icon:R.INFO,text:"While white test mode is enabled, Lumenator will test your selection.  If Lumenator receives commands from other sources such as MQTT, the test will be overidden."}))))},Yt=e=>{const t={current:null},[n,o]=$(e.activeId||0),[i,r]=$(0),s=new ResizeObserver(e=>{for(let t of e)if(t.contentBoxSize){const e=Array.isArray(t.contentBoxSize)?t.contentBoxSize[0]:t.contentBoxSize;e.blockSize!=i&&r(e.blockSize)}else t.contentRect?t.contentRect.height!=i&&r(t.contentRect.height):r(0)});j(()=>{t.current&&s.observe(t.current)},[t]);return h(f,null,h("div",{class:"lum-Nav"+(e.minimized?" minimized":"")},h("ul",{class:"lum-NavMenu"},e.minimized?h("div",null):Array.isArray(e.children)?e.children.map(e=>{const t=e.props;return h("li",{class:"tab"+(e.props.id===n?" active":""),onClick:()=>{o(e.props.id)}},t.title)}):e.children.props?h("li",{class:"tab active"},e.children.props.title):void 0)),i,h("div",{class:"lum-Nav-pushDown"+(e.minimized?" minimized":""),style:{visibility:i?"visible":"hidden"}},h("div",{class:"lum-Nav-pushDown-content",ref:t},"function"==typeof e.renderMessages&&e.renderMessages(),"function"==typeof e.renderActionSection&&e.renderActionSection())),h("main",null,h("div",{class:"pushDown-spacer",style:{height:i,marginBottom:e.minimized?"0":"10px"}}),Array.isArray(e.children)?e.children.find(e=>e.props.id===n):e.children.props?e.children:void 0))},$t=e=>h("div",null,e.children),jt=({page:e="app",config:t={},...n})=>{const[o,i]=$(!1),[r,s]=$(!1),l=(e,o=!1,i="IP")=>{if("function"==typeof n.onConfigUpdate)if(oe(e)){const o=ie(e);o&&n.onConfigUpdate({...t,[le[`NETWORK_${i}1`]]:o.a,[le[`NETWORK_${i}2`]]:o.b,[le[`NETWORK_${i}3`]]:o.c,[le[`NETWORK_${i}4`]]:o.d})}else o&&n.onConfigUpdate({...t})};return h(f,null,h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"ssid"},"Network SSID"),h(be,{id:"ssid",value:t[le.NETWORK_SSID]||void 0,maxLength:40,onChange:e=>{"function"==typeof n.onConfigUpdate&&n.onConfigUpdate({...t,[le.NETWORK_SSID]:e})}}),h("div",{class:"helper-text"},"Max 40 characters")),h("div",{class:"form-group no-margin"},h("label",{for:"password"},"Network Password"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(be,{id:"password",type:o||"app"!==e?"string":"password",value:t[le.NETWORK_PASS]||void 0,maxLength:20,onChange:e=>{"function"==typeof n.onConfigUpdate&&n.onConfigUpdate({...t,[le.NETWORK_PASS]:e})}}),h("div",{class:"helper-text"},"Max 20 characters")),"app"===e&&h("button",{type:"button",class:"ml-small",onClick:()=>{i(!o)}},o?"Hide":"Show"))),h("div",{class:"form-group"},h("label",{for:"ip"},"Static IP"),h(be,{disabled:t[le.NETWORK_DHCP],value:re(t[le.NETWORK_IP1],t[le.NETWORK_IP2],t[le.NETWORK_IP3],t[le.NETWORK_IP4])||"",onChange:l,onBlur:e=>{l(e,!0)}}),h("div",{class:"helper-text mt-large"},"Static IPv4 address on the local network.")),h("div",{class:"form-group"},h("label",{for:"ip"},"Use DHCP"),h(ye,{onClick:()=>{"function"==typeof n.onConfigUpdate&&n.onConfigUpdate({...t,[le.NETWORK_DHCP]:!t[le.NETWORK_DHCP]})},on:t[le.NETWORK_DHCP]})),h("div",{class:"form-group"},h("label",{for:"ip"},"Gateway"),h(be,{disabled:t[le.NETWORK_DHCP],value:re(t[le.NETWORK_GATEWAY1],t[le.NETWORK_GATEWAY2],t[le.NETWORK_GATEWAY3],t[le.NETWORK_GATEWAY4])||"",onChange:e=>{l(e,!1,"GATEWAY")},onBlur:e=>{l(e,!0,"GATEWAY")}})),h("div",null),h("div",{class:"form-group"},h("label",{for:"ip"},"Subnet"),h(be,{disabled:t[le.NETWORK_DHCP],value:re(t[le.NETWORK_SUBNET1],t[le.NETWORK_SUBNET2],t[le.NETWORK_SUBNET3],t[le.NETWORK_SUBNET4])||"",onChange:e=>{l(e,!1,"SUBNET")},onBlur:e=>{l(e,!0,"SUBNET")}})))),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"ssid"},"Access Point Security Password"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(be,{id:"apPass",maxLength:20,type:r||"app"!==e?"string":"password",value:t[le.ACCESS_POINT_PASS]||void 0,onChange:e=>{"function"==typeof n.onConfigUpdate&&n.onConfigUpdate({...t,[le.ACCESS_POINT_PASS]:e})}}),h("div",{class:"helper-text"},"Max 20 characters")),"app"===e&&h("button",{type:"button",class:"ml-small",onClick:()=>{s(!r)}},r?"Hide":"Show")),h("div",{class:"helper-text mt-large"},"Password for the setup access point"," ","setup"===e?"(this page)":""," when Lumenator cannot connect to the network.")))))};let zt;var Jt;(Jt=zt||(zt={}))[Jt.OFF=0]="OFF",Jt[Jt.ON=1]="ON";class qt extends _{configService=new fe;websocketService=new Ce;hardwareService=new Se;bannerService=new se(e=>{this.forceUpdate(),e&&this.setState(e)});constructor(){super(),this.state={controlMode:_e.STANDBY,loading:!0},this.saveChangesDialog={id:"saveChanges",warningText:"Unsaved Changes",warningIcon:R.ALERT,okText:"Save Configuration",onOk:()=>{this.saveConfiguration()},onCancel:()=>{this.setState({config:{...this.state.originalConfig}}),this.bannerService.clear()}},this.saveConfiguration=this.saveConfiguration.bind(this)}init=async()=>{try{const e=await this.configService.loadConfigJson();e&&this.setState({originalConfig:{...e},config:{...e},loading:!1})}catch(e){console.error(e),this.setState({loading:!1})}};componentDidMount(){this.init()}componentDidUpdate(){this.bannerService.dialogConfig&&this.bannerService.dialogConfig.id===this.saveChangesDialog.id||!this.configService.hasUnsavedChanges(this.state.originalConfig,this.state.config)||this.bannerService.newDialog(this.saveChangesDialog)}isGpioMode=e=>e===_e.GPIO_B||e===_e.GPIO_G||e===_e.GPIO_R||e===_e.GPIO_W||e===_e.GPIO_WW;handleControlModeToggle=e=>{this.isGpioMode(this.state.controlMode)&&this.websocketService.send(`gpio:${this.state.controlMode}:${zt.OFF}`),this.isGpioMode(e)&&this.websocketService.send(`gpio:${e}:${zt.ON}`),e===_e.STANDBY&&this.websocketService.send("standby"),this.setState({controlMode:e})};handleColorSet=e=>{"rgb"===e.type&&this.setState({rgbColor:e.color}),"white"===e.type&&this.setState({whiteColor:e.color}),"whiteValue"===e.type&&this.setState({whiteValueColor:e.color})};saveConfiguration(){this.setState({loading:!0}),this.state.config&&this.configService.saveConfigJson(this.state.config).then(e=>{!0===e&&setTimeout(()=>{this.setState({originalConfig:{...this.state.config},loading:!1}),this.bannerService.clear(),this.bannerService.addMessage(h(te,{text:"Configuration saved successfully",closable:!0,autoClose:!0}))},1e3)})}render(){return h("div",{id:"lumenator-web-app"},this.state.loading&&h(we,null),h("header",null,h("div",{class:"header-container"},h("div",{class:"header-items"},h("h2",null,"Lumenator"),this.state.originalConfig&&this.state.originalConfig[le.DEVICE_NAME]&&h(ce,{text:this.state.originalConfig[le.DEVICE_NAME]}),h("div",{class:"version"},"v1.0")))),h(Yt,{activeId:1,renderActionSection:()=>this.bannerService.renderActionSection()},h($t,{id:1,title:"Device"},h(Te,{config:this.state.config,bannerService:this.bannerService,hardwareService:this.hardwareService,websocketService:this.websocketService,configService:this.configService,onConfigUpdate:e=>{this.setState({config:{...e}})},onLoading:e=>{this.setState({loading:e})},controlMode:this.state.controlMode,onControlModeToggle:this.handleControlModeToggle})),h($t,{id:2,title:"Network"},h(jt,{config:this.state.config,onConfigUpdate:e=>{this.setState({config:{...e}})}})),h($t,{id:3,title:"MQTT"},h(Ie,{config:this.state.config,onConfigUpdate:e=>{this.setState({config:{...e}})}})),h($t,{id:4,title:"E131"},h(Ee,{config:this.state.config,onConfigUpdate:e=>{this.setState({config:{...e}})}})),h($t,{id:5,title:"Test"},h(Vt,{webSocketService:this.websocketService,controlMode:this.state.controlMode,onControlModeToggle:this.handleControlModeToggle,onColorSet:this.handleColorSet,rgbColor:this.state.rgbColor,whiteColor:this.state.whiteColor,whiteValueColor:this.state.whiteValueColor}))))}}class Xt extends _{hardwareService=new Se;configService=new fe;constructor(){super(),this.state={accessGranted:!1,errorText:""},this.renderActionSection=this.renderActionSection.bind(this)}init=async()=>{try{const e=await this.configService.loadConfigJson();e&&this.setState({originalConfig:{...e},config:{...e}}),e[le.ACCESS_POINT_PASS]||this.setState({accessGranted:!0})}catch(e){}};componentDidMount(){this.init()}renderActionSection(){return this.configService.hasUnsavedChanges(this.state.originalConfig,this.state.config)?h("section",{class:"action-section no-margin"},h("div",null,h("button",{onClick:()=>{this.setState({config:{...this.state.originalConfig}})}},"Start Over"),h("button",{class:"primary",onClick:()=>{this.state.config&&(this.setState({loading:!0}),this.configService.saveConfigJson(this.state.config).then(e=>{!0===e&&(this.setState({originalConfig:{...this.state.config}}),this.hardwareService.restart())}))}},"Save and Restart"))):h(f,null)}login=()=>{this.state.originalConfig&&(this.state.originalConfig[le.ACCESS_POINT_PASS]==this.state.password?this.setState({accessGranted:!0}):this.setState({errorText:"Invalid password"}))};render(){return h("div",{id:"lumenator-web-app"},this.state.loading&&h(we,null),h("header",null,h("div",{class:"header-container"},h("div",{class:"header-items"},h("h2",null,"Lumenator")))),h(Yt,{minimized:!0,activeId:1,renderActionSection:this.renderActionSection},h($t,{id:1,title:"Setup"},!this.state.accessGranted&&h("section",{style:{maxWidth:"400px"}},h("div",{class:"form-group no-margin"},h("label",null,"Setup Password"),h("div",{className:"flex-stretch"},h("div",{class:"flex-grow"},h(be,{onEnter:this.login,onChange:e=>{this.setState({password:e})},type:"password"})),h("button",{class:"primary ml-small",onClick:this.login},"Go"))),h("div",{class:"error-text"},this.state.errorText))||h(f,null,h("section",null,h("h4",null,"Welcome!"),h("p",null,'To get started, fill out the network configuration form below, then click "Save and Restart". Once configured, Lumenator will try to connect to your wireless network. If unsuccessful, this access point will become available again for configuration.')),h(jt,{page:"setup",config:this.state.config,onConfigUpdate:e=>{this.setState({config:{...e}})}})))),JSON.stringify(this.state.config))}}x(h("setup"===("lumenator-setup"===document.body.id?"setup":"app")?Xt:qt,null),document.body)}();