!function(){var e,t,n,o,i,r,l={},s=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function h(t,n,o){var i,r,l,s={};for(l in n)"key"==l?i=n[l]:"ref"==l?r=n[l]:s[l]=n[l];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):o),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===s[l]&&(s[l]=t.defaultProps[l]);return d(t,s,i,r,null)}function d(e,o,i,r,l){var s={type:e,props:o,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==l?++n:l};return null!=t.vnode&&t.vnode(s),s}function f(e){return e.children}function p(e,t){this.props=e,this.context=t}function _(e,t){if(null==t)return e.__?_(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?_(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function v(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!y.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||i)(y)}function y(){for(var e;y.__r=o.length;)e=o.sort((function(e,t){return e.__v.__b-t.__v.__b})),o=[],e.some((function(e){var t,n,o,i,r,l;e.__d&&(r=(i=(t=e).__v).__e,(l=t.__P)&&(n=[],(o=c({},i)).__v=i.__v+1,P(l,i,o,t.__n,void 0!==l.ownerSVGElement,null!=i.__h?[r]:null,n,null==r?_(i):r,i.__h),T(n,i),i.__e!=r&&g(i)))}))}function b(e,t,n,o,i,r,a,c,u,h){var p,g,v,y,b,C,k,S=o&&o.__k||s,x=S.length;for(n.__k=[],p=0;p<t.length;p++)if(null!=(y=n.__k[p]=null==(y=t[p])||"boolean"==typeof y?null:"string"==typeof y||"number"==typeof y||"bigint"==typeof y?d(null,y,null,null,y):Array.isArray(y)?d(f,{children:y},null,null,null):y.__b>0?d(y.type,y.props,y.key,null,y.__v):y)){if(y.__=n,y.__b=n.__b+1,null===(v=S[p])||v&&y.key==v.key&&y.type===v.type)S[p]=void 0;else for(g=0;g<x;g++){if((v=S[g])&&y.key==v.key&&y.type===v.type){S[g]=void 0;break}v=null}P(e,y,v=v||l,i,r,a,c,u,h),b=y.__e,(g=y.ref)&&v.ref!=g&&(k||(k=[]),v.ref&&k.push(v.ref,null,y),k.push(g,y.__c||b,y)),null!=b?(null==C&&(C=b),"function"==typeof y.type&&null!=y.__k&&y.__k===v.__k?y.__d=u=m(y,u,e):u=w(e,y,v,S,b,u),h||"option"!==n.type?"function"==typeof n.type&&(n.__d=u):e.value=""):u&&v.__e==u&&u.parentNode!=e&&(u=_(v))}for(n.__e=C,p=x;p--;)null!=S[p]&&("function"==typeof n.type&&null!=S[p].__e&&S[p].__e==n.__d&&(n.__d=_(o,p+1)),W(S[p],S[p]));if(k)for(p=0;p<k.length;p++)E(k[p],k[++p],k[++p])}function m(e,t,n){var o,i;for(o=0;o<e.__k.length;o++)(i=e.__k[o])&&(i.__=e,t="function"==typeof i.type?m(i,t,n):w(n,i,i,e.__k,i.__e,t));return t}function w(e,t,n,o,i,r){var l,s,a;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||i!=r||null==i.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(i),l=null;else{for(s=r,a=0;(s=s.nextSibling)&&a<o.length;a+=2)if(s==i)break e;e.insertBefore(i,r),l=r}return void 0!==l?l:i.nextSibling}function C(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||a.test(t)?n:n+"px"}function k(e,t,n,o,i){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||C(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||C(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?x:S,r):e.removeEventListener(t,r?x:S,r);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function S(e){this.l[e.type+!1](t.event?t.event(e):e)}function x(e){this.l[e.type+!0](t.event?t.event(e):e)}function P(n,o,i,r,s,a,h,d,g){var v,y,m,w,C,S,x,P,T,E,W,O=o.type;if(void 0!==o.constructor)return null;null!=i.__h&&(g=i.__h,d=o.__e=i.__e,o.__h=null,a=[d]),(v=t.__b)&&v(o);try{e:if("function"==typeof O){if(P=o.props,T=(v=O.contextType)&&r[v.__c],E=v?T?T.props.value:v.__:r,i.__c?x=(y=o.__c=i.__c).__=y.__E:("prototype"in O&&O.prototype.render?o.__c=y=new O(P,E):(o.__c=y=new p(P,E),y.constructor=O,y.render=M),T&&T.sub(y),y.props=P,y.state||(y.state={}),y.context=E,y.__n=r,m=y.__d=!0,y.__h=[]),null==y.__s&&(y.__s=y.state),null!=O.getDerivedStateFromProps&&(y.__s==y.state&&(y.__s=c({},y.__s)),c(y.__s,O.getDerivedStateFromProps(P,y.__s))),w=y.props,C=y.state,m)null==O.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&y.__h.push(y.componentDidMount);else{if(null==O.getDerivedStateFromProps&&P!==w&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(P,E),!y.__e&&null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(P,y.__s,E)||o.__v===i.__v){y.props=P,y.state=y.__s,o.__v!==i.__v&&(y.__d=!1),y.__v=o,o.__e=i.__e,o.__k=i.__k,o.__k.forEach((function(e){e&&(e.__=o)})),y.__h.length&&h.push(y);break e}null!=y.componentWillUpdate&&y.componentWillUpdate(P,y.__s,E),null!=y.componentDidUpdate&&y.__h.push((function(){y.componentDidUpdate(w,C,S)}))}y.context=E,y.props=P,y.state=y.__s,(v=t.__r)&&v(o),y.__d=!1,y.__v=o,y.__P=n,v=y.render(y.props,y.state,y.context),y.state=y.__s,null!=y.getChildContext&&(r=c(c({},r),y.getChildContext())),m||null==y.getSnapshotBeforeUpdate||(S=y.getSnapshotBeforeUpdate(w,C)),W=null!=v&&v.type===f&&null==v.key?v.props.children:v,b(n,Array.isArray(W)?W:[W],o,i,r,s,a,h,d,g),y.base=o.__e,o.__h=null,y.__h.length&&h.push(y),x&&(y.__E=y.__=null),y.__e=!1}else null==a&&o.__v===i.__v?(o.__k=i.__k,o.__e=i.__e):o.__e=function(t,n,o,i,r,s,a,c){var h,d,f,p=o.props,g=n.props,v=n.type,y=0;if("svg"===v&&(r=!0),null!=s)for(;y<s.length;y++)if((h=s[y])&&(h===t||(v?h.localName==v:3==h.nodeType))){t=h,s[y]=null;break}if(null==t){if(null===v)return document.createTextNode(g);t=r?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),s=null,c=!1}if(null===v)p===g||c&&t.data===g||(t.data=g);else{if(s=s&&e.call(t.childNodes),d=(p=o.props||l).dangerouslySetInnerHTML,f=g.dangerouslySetInnerHTML,!c){if(null!=s)for(p={},y=0;y<t.attributes.length;y++)p[t.attributes[y].name]=t.attributes[y].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===t.innerHTML)||(t.innerHTML=f&&f.__html||""))}if(function(e,t,n,o,i){var r;for(r in n)"children"===r||"key"===r||r in t||k(e,r,null,n[r],o);for(r in t)i&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||k(e,r,t[r],n[r],o)}(t,g,p,r,c),f)n.__k=[];else if(y=n.props.children,b(t,Array.isArray(y)?y:[y],n,o,i,r&&"foreignObject"!==v,s,a,s?s[0]:o.__k&&_(o,0),c),null!=s)for(y=s.length;y--;)null!=s[y]&&u(s[y]);c||("value"in g&&void 0!==(y=g.value)&&(y!==t.value||"progress"===v&&!y)&&k(t,"value",y,p.value,!1),"checked"in g&&void 0!==(y=g.checked)&&y!==t.checked&&k(t,"checked",y,p.checked,!1))}return t}(i.__e,o,i,r,s,a,h,g);(v=t.diffed)&&v(o)}catch(n){o.__v=null,(g||null!=a)&&(o.__e=d,o.__h=!!g,a[a.indexOf(d)]=null),t.__e(n,o,i)}}function T(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function E(e,n,o){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,o)}}function W(e,n,o){var i,r;if(t.unmount&&t.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||E(i,null,n)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){t.__e(e,n)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&W(i[r],n,"function"!=typeof e.type);o||null==e.__e||u(e.__e),e.__e=e.__d=void 0}function M(e,t,n){return this.constructor(e,n)}function O(n,o,i){var r,s,a;t.__&&t.__(n,o),s=(r="function"==typeof i)?null:i&&i.__k||o.__k,a=[],P(o,n=(!r&&i||o).__k=h(f,null,[n]),s||l,l,void 0!==o.ownerSVGElement,!r&&i?[i]:s?null:o.firstChild?e.call(o.childNodes):null,a,!r&&i?i:s?s.__e:o.firstChild,r),T(a,n)}let A;var I;let R;var N;e=s.slice,t={__e:function(e,t){for(var n,o,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e}},n=0,p.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},n),this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),v(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},p.prototype.render=f,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,y.__r=0,(I=A||(A={})).INFO="info",I.ALERT="alert",I.DANGER="danger",I.BASIC="basic",I.BASIC_BORDERLESS="basic-borderless",(N=R||(R={})).ALERT="alert",N.INFO="info";var G,F,D,B=0,U=[],H=t.__b,L=t.__r,j=t.diffed,$=t.__c,V=t.unmount;function J(e,n){t.__h&&t.__h(F,e,B||n),B=0;var o=F.__H||(F.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function z(e){return B=1,function(e,t,n){var o=J(G++,2);return o.t=e,o.__c||(o.__=[n?n(t):Q(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=F),o.__}(Q,e)}function q(){U.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(K),e.__H.__h.forEach(X),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}})),U=[]}t.__b=function(e){F=null,H&&H(e)},t.__r=function(e){L&&L(e),G=0;var t=(F=e.__c).__H;t&&(t.__h.forEach(K),t.__h.forEach(X),t.__h=[])},t.diffed=function(e){j&&j(e);var n=e.__c;n&&n.__H&&n.__H.__h.length&&(1!==U.push(n)&&D===t.requestAnimationFrame||((D=t.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(o),Y&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Y&&(t=requestAnimationFrame(n))})(q)),F=void 0},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(K),e.__h=e.__h.filter((function(e){return!e.__||X(e)}))}catch(o){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(o,e.__v)}})),$&&$(e,n)},t.unmount=function(e){V&&V(e);var n=e.__c;if(n&&n.__H)try{n.__H.__.forEach(K)}catch(e){t.__e(e,n.__v)}};var Y="function"==typeof requestAnimationFrame;function K(e){var t=F;"function"==typeof e.__c&&e.__c(),F=t}function X(e){var t=F;e.__c=e.__(),F=t}function Q(e,t){return"function"==typeof t?t(e):t}const Z=e=>{const[t,n]=z(!1);return h(f,null,!t&&h("div",{class:`lum-AlertWarning${e.icon&&e.icon.length?" icon":""}${e.margin&&e.margin.length?" margin-"+e.margin:""}`},h("div",{id:"message",class:e.type?e.type:"info"},e.icon&&e.icon.length&&h("span",{class:"icon "+e.icon},h("span",null)),h("span",{class:"text"},e.text),e.closable&&h("button",{class:"close",onClick:()=>{n(!0)}},"x"))))},ee=e=>h("div",{class:"lum-Chip"},e.text||e.children);class te{DEVELOPMENT=!1;constructor(){}jsonGET(e){return fetch(e).then((function(e){return e.json()}))}jsonPOST(e,t){return fetch(e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:t&&JSON.stringify(t)||""}).then(e=>e.json())}emptyPOST(e){return fetch(e,{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"text/plain"}}).then(e=>e.json())}}let ne;var oe;(oe=ne||(ne={}))[oe.RGBWW=0]="RGBWW",oe[oe.RGBW=1]="RGBW",oe[oe.RGB=2]="RGB",oe[oe.WW=3]="WW",oe[oe.W=4]="W";class ie extends te{constructor(){super()}loadConfigJson=()=>new Promise((e,t)=>{this.DEVELOPMENT?e({device:{name:"My Smart Bulb",type:ne.RGBWW},gpio:{w:15,ww:13,r:12,g:14,b:16},network:{ssid:"MySSID",pass:"password"},accessPoint:{pass:"ap_password"}}):this.jsonGET("config").then((function(t){e(t)})).catch((function(e){t(e)}))});saveConfigJson=e=>new Promise((t,n)=>{this.DEVELOPMENT?t(!0):this.jsonPOST("config",e).then((function(e){!0===e.success&&t(!0)})).catch((function(e){n(e)}))})}let re;var le;function se(e){return"0"===e?0:"string"==typeof e?parseFloat(e):void 0}(le=re||(re={}))[le.STANDBY=0]="STANDBY",le[le.RGB=1]="RGB",le[le.WHITE=2]="WHITE",le[le.GPIO_R=3]="GPIO_R",le[le.GPIO_G=4]="GPIO_G",le[le.GPIO_B=5]="GPIO_B",le[le.GPIO_W=6]="GPIO_W",le[le.GPIO_WW=7]="GPIO_WW";const ae=e=>{const[t,n]=z(e.value);return h("div",{class:"lum-DropdownMenu"},h("select",{value:e.value,class:e.placeholder&&void 0===e.value&&void 0===t?"placeholder":"",onChange:t=>{const o=t.target.value,i="number"===e.type?se(o):o;n(i),"function"==typeof e.onSelect&&e.onSelect(i)}},e.placeholder&&h(f,null,h("option",{value:"",disabled:!0,selected:!0},e.placeholder),h("option",{value:"",disabled:!0},"---------------------------")),e.children),h("div",{class:"dropdown-indicator"}))};class ce extends te{constructor(){super()}restart=()=>new Promise((e,t)=>{this.DEVELOPMENT?e(!0):this.emptyPOST("restart").then(()=>{e(!0)}).catch(e=>{t(e)})})}const ue=e=>h("div",{class:"lum-Input"},h("input",{type:e.type,class:"lum-Input-input",value:e.value,onInput:t=>{const n=t.target.value,o="number"===e.type?se(n):n;"function"==typeof e.onChange&&e.onChange(o)}}),e.children),he=e=>h("div",{class:"lum-ToggleSwitch "+(void 0!==e.on&&e.on?"ON":"OFF"),ontouchstart:"return true;",onClick:()=>{"function"==typeof e.onClick&&e.onClick(!e.on)}},h("div",{class:"circle"})),de=e=>{const t=new ce,n=t=>{"function"==typeof e.onControlModeToggle&&(e.controlMode===t?e.onControlModeToggle(re.STANDBY):e.onControlModeToggle(t))};return h(f,null,h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"name"},"Device Name"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(ue,{value:e.deviceConfig&&e.deviceConfig.name||void 0,onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig,name:t},{...e.gpioConfig})}})),h("button",{class:"ml-small",onClick:()=>{t.restart()}},"Restart"))),h("div",{class:"form-group no-margin"},h("label",{for:"name"},"Device Type"),h(ae,{type:"number",placeholder:"Select a device type",value:e.deviceConfig&&void 0!==e.deviceConfig.type?e.deviceConfig.type:void 0,onSelect:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig,type:t},{...e.gpioConfig})}},h("option",{value:"0"},"RGBWW (RGB w/ Cool / Warm White)"),h("option",{value:"1"},"RGBW (RGB w/ White)"),h("option",{value:"2"},"RGB"),h("option",{value:"3"},"WW (Cool / Warm White)"),h("option",{value:"4"},"W (White w/o Temp Control)"))))),h("section",null,h("label",null,"GPIO Mapping"),h("div",{class:"grid-large mt-small"},h("div",null,h("table",null,h("tr",{class:"header-row"},h("th",null,"Channel"),h("th",null,"GPIO"),h("th",null,"Test")),e.deviceConfig&&(e.deviceConfig.type===ne.RGB||e.deviceConfig.type===ne.RGBW||e.deviceConfig.type===ne.RGBWW)&&h(f,null,h("tr",null,h("td",null,"Red"),h("td",null,h(ue,{value:e.gpioConfig?e.gpioConfig.r:void 0,type:"number",onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig},{...e.gpioConfig,r:t})}})),h("td",null,h(he,{on:e.controlMode===re.GPIO_R,onClick:()=>{n(re.GPIO_R)}}))),h("tr",null,h("td",null,"Green"),h("td",null,h(ue,{value:e.gpioConfig?e.gpioConfig.g:void 0,type:"number",onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig},{...e.gpioConfig,g:t})}})),h("td",null,h(he,{on:e.controlMode===re.GPIO_G,onClick:()=>{n(re.GPIO_G)}}))),h("tr",null,h("td",null,"Blue"),h("td",null,h(ue,{value:e.gpioConfig?e.gpioConfig.b:void 0,type:"number",onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig},{...e.gpioConfig,b:t})}})),h("td",null,h(he,{on:e.controlMode===re.GPIO_B,onClick:()=>{n(re.GPIO_B)}})))),e.deviceConfig&&e.deviceConfig.type!==ne.RGB&&h("tr",null,h("td",null,"White"),h("td",null,h(ue,{value:e.gpioConfig?e.gpioConfig.w:void 0,type:"number",onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig},{...e.gpioConfig,w:t})}})),h("td",null,h(he,{on:e.controlMode===re.GPIO_W,onClick:()=>{n(re.GPIO_W)}}))),e.deviceConfig&&(e.deviceConfig.type===ne.RGBWW||e.deviceConfig.type===ne.WW)&&h("tr",null,h("td",null,"Warm White"),h("td",null,h(ue,{value:e.gpioConfig?e.gpioConfig.ww:void 0,type:"number",onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({...e.deviceConfig},{...e.gpioConfig,ww:t})}})),h("td",null,h(he,{on:e.controlMode===re.GPIO_WW,onClick:()=>{n(re.GPIO_WW)}}))))))))},fe=({variant:e="page",...t})=>h("div",{id:"lum-loader",class:"lum-loader "+e},h("div",{id:"loader",class:"loader"},"Loading..."));
/*!
 * iro.js v5.2.3
 * 2016-2020 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */
var pe,_e,ge,ve,ye,be={},me=[],we=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function Ce(e,t){for(var n in t)e[n]=t[n];return e}function ke(e){var t=e.parentNode;t&&t.removeChild(e)}function Se(e,t,n){var o,i,r,l,s=arguments;if(t=Ce({},t),arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(s[o]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===t[i]&&(t[i]=e.defaultProps[i]);return l=t.key,null!=(r=t.ref)&&delete t.ref,null!=l&&delete t.key,xe(e,t,l,r)}function xe(e,t,n,o){var i={type:e,props:t,key:n,ref:o,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return pe.vnode&&pe.vnode(i),i}function Pe(e){return e.children}function Te(e,t){this.props=e,this.context=t}function Ee(e,t){if(null==t)return e.__p?Ee(e.__p,e.__p.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Ee(e):null}function We(e){var t,n;if(null!=(e=e.__p)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return We(e)}}function Me(e){(!e.__d&&(e.__d=!0)&&1===_e.push(e)||ve!==pe.debounceRendering)&&(ve=pe.debounceRendering,(pe.debounceRendering||ge)(Oe))}function Oe(){var e,t,n,o,i,r,l,s;for(_e.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=_e.pop();)e.__d&&(n=void 0,o=void 0,r=(i=(t=e).__v).__e,l=t.__P,s=t.u,t.u=!1,l&&(n=[],o=Fe(l,i,Ce({},i),t.__n,void 0!==l.ownerSVGElement,null,n,s,null==r?Ee(i):r),De(n,i),o!=r&&We(i)))}function Ae(e,t,n,o,i,r,l,s,a){var c,u,h,d,f,p,_,g=n&&n.__k||me,v=g.length;if(s==be&&(s=null!=r?r[0]:v?Ee(n,0):null),c=0,t.__k=Ie(t.__k,(function(n){if(null!=n){if(n.__p=t,n.__b=t.__b+1,null===(h=g[c])||h&&n.key==h.key&&n.type===h.type)g[c]=void 0;else for(u=0;u<v;u++){if((h=g[u])&&n.key==h.key&&n.type===h.type){g[u]=void 0;break}h=null}if(d=Fe(e,n,h=h||be,o,i,r,l,null,s,a),(u=n.ref)&&h.ref!=u&&(_||(_=[])).push(u,n.__c||d,n),null!=d){if(null==p&&(p=d),null!=n.l)d=n.l,n.l=null;else if(r==h||d!=s||null==d.parentNode){e:if(null==s||s.parentNode!==e)e.appendChild(d);else{for(f=s,u=0;(f=f.nextSibling)&&u<v;u+=2)if(f==d)break e;e.insertBefore(d,s)}"option"==t.type&&(e.value="")}s=d.nextSibling,"function"==typeof t.type&&(t.l=d)}}return c++,n})),t.__e=p,null!=r&&"function"!=typeof t.type)for(c=r.length;c--;)null!=r[c]&&ke(r[c]);for(c=v;c--;)null!=g[c]&&Ue(g[c],g[c]);if(_)for(c=0;c<_.length;c++)Be(_[c],_[++c],_[++c])}function Ie(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ie(e[o],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return xe(null,e,null,null);if(null!=e.__e||null!=e.__c){var t=xe(e.type,e.props,e.key,null);return t.__e=e.__e,t}return e}(e)):e);return n}function Re(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===we.test(t)?n+"px":null==n?"":n}function Ne(e,t,n,o,i){var r,l,s,a,c;if("key"===(t=i?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(r=e.style,"string"==typeof n)r.cssText=n;else{if("string"==typeof o&&(r.cssText="",o=null),o)for(l in o)n&&l in n||Re(r,l,"");if(n)for(s in n)o&&n[s]===o[s]||Re(r,s,n[s])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(o||e.addEventListener(t,Ge,a),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,Ge,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function Ge(e){return this.t[e.type](pe.event?pe.event(e):e)}function Fe(e,t,n,o,i,r,l,s,a,c){var u,h,d,f,p,_,g,v,y,b,m=t.type;if(void 0!==t.constructor)return null;(u=pe.__b)&&u(t);try{e:if("function"==typeof m){if(v=t.props,y=(u=m.contextType)&&o[u.__c],b=u?y?y.props.value:u.__p:o,n.__c?g=(h=t.__c=n.__c).__p=h.__E:("prototype"in m&&m.prototype.render?t.__c=h=new m(v,b):(t.__c=h=new Te(v,b),h.constructor=m,h.render=He),y&&y.sub(h),h.props=v,h.state||(h.state={}),h.context=b,h.__n=o,d=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=m.getDerivedStateFromProps&&Ce(h.__s==h.state?h.__s=Ce({},h.__s):h.__s,m.getDerivedStateFromProps(v,h.__s)),d)null==m.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&l.push(h);else{if(null==m.getDerivedStateFromProps&&null==s&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(v,b),!s&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(v,h.__s,b)){for(h.props=v,h.state=h.__s,h.__d=!1,h.__v=t,t.__e=null!=a?a!==n.__e?a:n.__e:null,t.__k=n.__k,u=0;u<t.__k.length;u++)t.__k[u]&&(t.__k[u].__p=t);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(v,h.__s,b)}for(f=h.props,p=h.state,h.context=b,h.props=v,h.state=h.__s,(u=pe.__r)&&u(t),h.__d=!1,h.__v=t,h.__P=e,u=h.render(h.props,h.state,h.context),t.__k=Ie(null!=u&&u.type==Pe&&null==u.key?u.props.children:u),null!=h.getChildContext&&(o=Ce(Ce({},o),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(_=h.getSnapshotBeforeUpdate(f,p)),Ae(e,t,n,o,i,r,l,a,c),h.base=t.__e;u=h.__h.pop();)h.__s&&(h.state=h.__s),u.call(h);d||null==f||null==h.componentDidUpdate||h.componentDidUpdate(f,p,_),g&&(h.__E=h.__p=null)}else t.__e=function(e,t,n,o,i,r,l,s){var a,c,u,h,d=n.props,f=t.props;if(i="svg"===t.type||i,null==e&&null!=r)for(a=0;a<r.length;a++)if(null!=(c=r[a])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,r[a]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),r=null}return null===t.type?d!==f&&(null!=r&&(r[r.indexOf(e)]=null),e.data=f):t!==n&&(null!=r&&(r=me.slice.call(e.childNodes)),u=(d=n.props||be).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,s||(h||u)&&(h&&u&&h.__html==u.__html||(e.innerHTML=h&&h.__html||"")),function(e,t,n,o,i){var r;for(r in n)r in t||Ne(e,r,null,n[r],o);for(r in t)i&&"function"!=typeof t[r]||"value"===r||"checked"===r||n[r]===t[r]||Ne(e,r,t[r],n[r],o)}(e,f,d,i,s),t.__k=t.props.children,h||Ae(e,t,n,o,"foreignObject"!==t.type&&i,r,l,be,s),s||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))),e}(n.__e,t,n,o,i,r,l,c);(u=pe.diffed)&&u(t)}catch(e){pe.__e(e,t,n)}return t.__e}function De(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(e){pe.__e(e,n.__v)}pe.__c&&pe.__c(t)}function Be(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){pe.__e(e,n)}}function Ue(e,t,n){var o,i,r;if(pe.unmount&&pe.unmount(e),(o=e.ref)&&Be(o,null,t),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.l=null,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){pe.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Ue(o[r],t,n);null!=i&&ke(i)}function He(e,t,n){return this.constructor(e,n)}pe={},Te.prototype.setState=function(e,t){var n=this.__s!==this.state&&this.__s||(this.__s=Ce({},this.state));("function"!=typeof e||(e=e(n,this.props)))&&Ce(n,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),Me(this))},Te.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,Me(this))},Te.prototype.render=Pe,_e=[],ge="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ve=pe.debounceRendering,pe.__e=function(e,t,n){for(var o;t=t.__p;)if((o=t.__c)&&!o.__p)try{if(o.constructor&&null!=o.constructor.getDerivedStateFromError)o.setState(o.constructor.getDerivedStateFromError(e));else{if(null==o.componentDidCatch)continue;o.componentDidCatch(e)}return Me(o.__E=o)}catch(t){e=t}throw e},ye=be;var Le="[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?",je=new RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),$e=new RegExp("rgba"+Le),Ve=new RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),Je=new RegExp("hsla"+Le),ze=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),qe=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$"),Ye=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),Ke=new RegExp("^(?:#?|0x?)([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$"),Xe=Math.log,Qe=Math.round,Ze=Math.floor;function et(e,t,n){return Math.min(Math.max(e,t),n)}function tt(e,t){var n=e.indexOf("%")>-1,o=parseFloat(e);return n?t/100*o:o}function nt(e){return parseInt(e,16)}function ot(e){return e.toString(16).padStart(2,"0")}var it=function(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=Object.assign({},this.$)},rt={hsv:{configurable:!0},hsva:{configurable:!0},hue:{configurable:!0},saturation:{configurable:!0},value:{configurable:!0},alpha:{configurable:!0},kelvin:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0},rgb:{configurable:!0},rgba:{configurable:!0},hsl:{configurable:!0},hsla:{configurable:!0},rgbString:{configurable:!0},rgbaString:{configurable:!0},hexString:{configurable:!0},hex8String:{configurable:!0},hslString:{configurable:!0},hslaString:{configurable:!0}};it.prototype.set=function(e){if("string"==typeof e)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else{if("object"!=typeof e)throw new Error("Invalid color value");e instanceof it?this.hsv=e.hsv:"object"==typeof e&&"r"in e&&"g"in e&&"b"in e?this.rgb=e:"object"==typeof e&&"h"in e&&"s"in e&&"v"in e?this.hsv=e:"object"==typeof e&&"h"in e&&"s"in e&&"l"in e&&(this.hsl=e)}},it.prototype.setChannel=function(e,t,n){var o;this[e]=Object.assign({},this[e],((o={})[t]=n,o))},it.prototype.reset=function(){this.hsva=this.initialValue},it.prototype.clone=function(){return new it(this)},it.prototype.unbind=function(){this.onChange=void 0},it.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,o=e.v/100,i=Ze(t),r=t-i,l=o*(1-n),s=o*(1-r*n),a=o*(1-(1-r)*n),c=i%6,u=[a,o,o,s,l,l][c],h=[l,l,a,o,o,s][c];return{r:et(255*[o,s,l,l,a,o][c],0,255),g:et(255*u,0,255),b:et(255*h,0,255)}},it.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.max(t,n,o),r=Math.min(t,n,o),l=i-r,s=0,a=i,c=0===i?0:l/i;switch(i){case r:s=0;break;case t:s=(n-o)/l+(n<o?6:0);break;case n:s=(o-t)/l+2;break;case o:s=(t-n)/l+4}return{h:60*s%360,s:et(100*c,0,100),v:et(100*a,0,100)}},it.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,o=(2-t)*n,i=o<=1?o:2-o,r=i<1e-9?0:t*n/i;return{h:e.h,s:et(100*r,0,100),l:et(50*o,0,100)}},it.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100,o=t+n<1e-9?0:2*n/(t+n);return{h:e.h,s:et(100*o,0,100),v:et((t+n)/2,0,100)}},it.kelvinToRgb=function(e){var t,n,o,i=e/100;return i<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*Xe(n),o=i<20?0:.8274096064007395*(o=i-10)-254.76935184120902+115.67994401066147*Xe(o)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*Xe(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*Xe(n),o=255),{r:et(Ze(t),0,255),g:et(Ze(n),0,255),b:et(Ze(o),0,255)}},it.rgbToKelvin=function(e){for(var t,n=e.r,o=e.b,i=1e3,r=4e4;r-i>.4;){var l=it.kelvinToRgb(t=.5*(r+i));l.b/l.r>=o/n?r=t:i=t}return t},rt.hsv.get=function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},rt.hsv.set=function(e){var t=this.$;if(e=Object.assign({},t,e),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var o in t)n[o]=e[o]!=t[o];this.$=e,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=e},rt.hsva.get=function(){return Object.assign({},this.$)},rt.hsva.set=function(e){this.hsv=e},rt.hue.get=function(){return this.$.h},rt.hue.set=function(e){this.hsv={h:e}},rt.saturation.get=function(){return this.$.s},rt.saturation.set=function(e){this.hsv={s:e}},rt.value.get=function(){return this.$.v},rt.value.set=function(e){this.hsv={v:e}},rt.alpha.get=function(){return this.$.a},rt.alpha.set=function(e){this.hsv=Object.assign({},this.hsv,{a:e})},rt.kelvin.get=function(){return it.rgbToKelvin(this.rgb)},rt.kelvin.set=function(e){this.rgb=it.kelvinToRgb(e)},rt.red.get=function(){return this.rgb.r},rt.red.set=function(e){this.rgb=Object.assign({},this.rgb,{r:e})},rt.green.get=function(){return this.rgb.g},rt.green.set=function(e){this.rgb=Object.assign({},this.rgb,{g:e})},rt.blue.get=function(){return this.rgb.b},rt.blue.set=function(e){this.rgb=Object.assign({},this.rgb,{b:e})},rt.rgb.get=function(){var e=it.hsvToRgb(this.$),t=e.r,n=e.g,o=e.b;return{r:Qe(t),g:Qe(n),b:Qe(o)}},rt.rgb.set=function(e){this.hsv=Object.assign({},it.rgbToHsv(e),{a:void 0===e.a?1:e.a})},rt.rgba.get=function(){return Object.assign({},this.rgb,{a:this.alpha})},rt.rgba.set=function(e){this.rgb=e},rt.hsl.get=function(){var e=it.hsvToHsl(this.$),t=e.h,n=e.s,o=e.l;return{h:Qe(t),s:Qe(n),l:Qe(o)}},rt.hsl.set=function(e){this.hsv=Object.assign({},it.hslToHsv(e),{a:void 0===e.a?1:e.a})},rt.hsla.get=function(){return Object.assign({},this.hsl,{a:this.alpha})},rt.hsla.set=function(e){this.hsl=e},rt.rgbString.get=function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},rt.rgbString.set=function(e){var t,n,o,i,r=1;if((t=je.exec(e))?(n=tt(t[1],255),o=tt(t[2],255),i=tt(t[3],255)):(t=$e.exec(e))&&(n=tt(t[1],255),o=tt(t[2],255),i=tt(t[3],255),r=tt(t[4],1)),!t)throw new Error("Invalid rgb string");this.rgb={r:n,g:o,b:i,a:r}},rt.rgbaString.get=function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},rt.rgbaString.set=function(e){this.rgbString=e},rt.hexString.get=function(){var e=this.rgb;return"#"+ot(e.r)+ot(e.g)+ot(e.b)},rt.hexString.set=function(e){var t,n,o,i,r=255;if((t=ze.exec(e))?(n=17*nt(t[1]),o=17*nt(t[2]),i=17*nt(t[3])):(t=qe.exec(e))?(n=17*nt(t[1]),o=17*nt(t[2]),i=17*nt(t[3]),r=17*nt(t[4])):(t=Ye.exec(e))?(n=nt(t[1]),o=nt(t[2]),i=nt(t[3])):(t=Ke.exec(e))&&(n=nt(t[1]),o=nt(t[2]),i=nt(t[3]),r=nt(t[4])),!t)throw new Error("Invalid hex string");this.rgb={r:n,g:o,b:i,a:r/255}},rt.hex8String.get=function(){var e=this.rgba;return"#"+ot(e.r)+ot(e.g)+ot(e.b)+ot(Ze(255*e.a))},rt.hex8String.set=function(e){this.hexString=e},rt.hslString.get=function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},rt.hslString.set=function(e){var t,n,o,i,r=1;if((t=Ve.exec(e))?(n=tt(t[1],360),o=tt(t[2],100),i=tt(t[3],100)):(t=Je.exec(e))&&(n=tt(t[1],360),o=tt(t[2],100),i=tt(t[3],100),r=tt(t[4],1)),!t)throw new Error("Invalid hsl string");this.hsl={h:n,s:o,l:i,a:r}},rt.hslaString.get=function(){var e=this.hsla;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},rt.hslaString.set=function(e){this.hslString=e},Object.defineProperties(it.prototype,rt);var lt;function st(e){var t=e.width,n=e.sliderSize,o=e.borderWidth,i=e.handleRadius,r=e.padding,l=e.sliderShape,s="horizontal"===e.layoutDirection;return n=n||2*r+2*i+2*o,"circle"===l?{handleStart:e.padding+e.handleRadius,handleRange:t-2*r-2*i-2*o,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-o/2}:{handleStart:n/2,handleRange:t-n,radius:n/2,x:0,y:0,width:s?n:t,height:s?t:n}}function at(e,t){var n=st(e),o=n.width,i=n.height,r=n.handleRange,l=n.handleStart,s="horizontal"===e.layoutDirection,a=s?o/2:i/2,c=l+function(e,t){var n=t.hsva,o=t.rgb;switch(e.sliderType){case"red":return o.r/2.55;case"green":return o.g/2.55;case"blue":return o.b/2.55;case"alpha":return 100*n.a;case"kelvin":var i=e.minTemperature,r=e.maxTemperature-i,l=(t.kelvin-i)/r*100;return Math.max(0,Math.min(l,100));case"hue":return n.h/=3.6;case"saturation":return n.s;case"value":default:return n.v}}(e,t)/100*r;return s&&(c=-1*c+r+2*l),{x:s?a:c,y:s?c:a}}function ct(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function ut(e,t,n){var o=e.wheelAngle,i=e.wheelDirection;return((t=!n&&"clockwise"===i||n&&"anticlockwise"===i?(n?180:360)-(o-t):o+t)%360+360)%360}function ht(e,t,n){var o=ct(e),i=o.cx,r=o.cy,l=e.width/2-e.padding-e.handleRadius-e.borderWidth;t=i-t,n=r-n;var s=ut(e,Math.atan2(-n,-t)*(180/Math.PI)),a=Math.min(Math.sqrt(t*t+n*n),l);return{h:Math.round(s),s:Math.round(100/l*a)}}function dt(e){var t=e.width;return{width:t,height:t,radius:e.padding+e.handleRadius}}function ft(e,t,n){var o=dt(e),i=o.width,r=o.height,l=o.radius,s=(t-l)/(i-2*l)*100,a=(n-l)/(r-2*l)*100;return{s:Math.max(0,Math.min(s,100)),v:Math.max(0,Math.min(100-a,100))}}function pt(e){lt||(lt=document.getElementsByTagName("base"));var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),o=/iPhone|iPod|iPad/i.test(t),i=window.location;return(n||o)&&lt.length>0?i.protocol+"//"+i.host+i.pathname+i.search+e:e}function _t(e,t,n,o,i){var r=i-o<=180?0:1;return o*=Math.PI/180,i*=Math.PI/180,"M "+(e+n*Math.cos(i))+" "+(t+n*Math.sin(i))+" A "+n+" "+n+" 0 "+r+" 0 "+(e+n*Math.cos(o))+" "+(t+n*Math.sin(o))}function gt(e,t,n,o){for(var i=0;i<o.length;i++){var r=o[i].x-t,l=o[i].y-n;if(Math.sqrt(r*r+l*l)<e.handleRadius)return i}return null}var vt=["mousemove","touchmove","mouseup","touchend"],yt=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(e){var t=this.handleEvent.bind(this),n={onMouseDown:t,ontouchstart:t},o="horizontal"===e.layoutDirection,i=null===e.margin?e.sliderMargin:e.margin,r={overflow:"visible",display:o?"inline-block":"block"};return e.index>0&&(r[o?"marginLeft":"marginTop"]=i),Se(Pe,null,e.children(this.uid,n,r))},t.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,o=this.base.getBoundingClientRect();e.preventDefault();var i=e.touches?e.changedTouches[0]:e,r=i.clientX-o.left,l=i.clientY-o.top;switch(e.type){case"mousedown":case"touchstart":vt.forEach((function(e){document.addEventListener(e,t,{passive:!1})})),n(r,l,0);break;case"mousemove":case"touchmove":n(r,l,1);break;case"mouseup":case"touchend":n(r,l,2),vt.forEach((function(e){document.removeEventListener(e,t)}))}},t}(Te);function bt(e){var t=e.r,n=e.url;return Se("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),x:e.x,y:e.y,style:{overflow:"visible"}},n&&Se("use",Object.assign({xlinkHref:pt(n)},e.props)),!n&&Se("circle",{r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&Se("circle",{r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function mt(e){var t=e.activeIndex,n=void 0!==t&&t<e.colors.length?e.colors[t]:e.color,o=st(e),i=o.width,r=o.height,l=o.radius,s=at(e,n),a=function(e,t){var n=t.hsv,o=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+o.g+","+o.b+")"],[100,"rgb(255,"+o.g+","+o.b+")"]];case"green":return[[0,"rgb("+o.r+",0,"+o.b+")"],[100,"rgb("+o.r+",255,"+o.b+")"]];case"blue":return[[0,"rgb("+o.r+","+o.g+",0)"],[100,"rgb("+o.r+","+o.g+",255)"]];case"alpha":return[[0,"rgba("+o.r+","+o.g+","+o.b+",0)"],[100,"rgb("+o.r+","+o.g+","+o.b+")"]];case"kelvin":for(var i=[],r=e.minTemperature,l=e.maxTemperature,s=l-r,a=r,c=0;a<l;a+=s/8,c+=1){var u=it.kelvinToRgb(a),h=u.r,d=u.g,f=u.b;i.push([12.5*c,"rgb("+h+","+d+","+f+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var p=it.hsvToHsl({h:n.h,s:0,v:n.v}),_=it.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"],[100,"hsl("+_.h+","+_.s+"%,"+_.l+"%)"]];case"value":default:var g=it.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]]}}(e,n),c="alpha"===e.sliderType;return Se(yt,Object.assign({},e,{onInput:function(t,o,i){var r=function(e,t,n){var o,i=st(e),r=i.handleRange,l=i.handleStart;o="horizontal"===e.layoutDirection?-1*n+r+l:t-l,o=Math.max(Math.min(o,r),0);var s=Math.round(100/r*o);switch(e.sliderType){case"kelvin":var a=e.minTemperature;return a+(e.maxTemperature-a)*(s/100);case"alpha":return s/100;case"hue":return 3.6*s;case"red":case"blue":case"green":return 2.55*s;default:return s}}(e,t,o);e.parent.inputActive=!0,n[e.sliderType]=r,e.onInput(i)}}),(function(t,o,u){return Se("svg",Object.assign({},o,{className:"IroSlider",width:i,height:r,style:u}),Se("defs",null,Se("linearGradient",Object.assign({id:"g"+t},function(e){var t="horizontal"===e.layoutDirection;return{x1:"0%",y1:t?"100%":"0%",x2:t?"0%":"100%",y2:"0%"}}(e)),a.map((function(e){return Se("stop",{offset:e[0]+"%","stop-color":e[1]})}))),c&&Se("pattern",{id:"b"+t,width:"8",height:"8",patternUnits:"userSpaceOnUse"},Se("rect",{x:"0",y:"0",width:"8",height:"8",fill:"#fff"}),Se("rect",{x:"0",y:"0",width:"4",height:"4",fill:"#ccc"}),Se("rect",{x:"4",y:"4",width:"4",height:"4",fill:"#ccc"})),c&&Se("pattern",{id:"f"+t,width:"100%",height:"100%"},Se("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+pt("#b"+t)+")"}),Se("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+pt("#g"+t)+")"}))),Se("rect",{className:"IroSliderBg",rx:l,ry:l,x:e.borderWidth/2,y:e.borderWidth/2,width:i-e.borderWidth,height:r-e.borderWidth,"stroke-width":e.borderWidth,stroke:e.borderColor,fill:"url("+pt((c?"#f":"#g")+t)+")"}),Se(bt,{isActive:!0,index:n.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s.x,y:s.y}))}))}function wt(e){var t=dt(e),n=t.width,o=t.height,i=t.radius,r=e.colors,l=e.parent,s=e.activeIndex,a=void 0!==s&&s<e.colors.length?e.colors[s]:e.color,c=[[[0,"#fff"],[100,"hsl("+a.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],u=r.map((function(t){return function(e,t){var n=dt(e),o=n.width,i=n.height,r=n.radius,l=t.hsv,s=r,a=o-2*r,c=i-2*r;return{x:s+l.s/100*a,y:s+(c-l.v/100*c)}}(e,t)}));return Se(yt,Object.assign({},e,{onInput:function(t,n,o){if(0===o){var i=gt(e,t,n,u);null!==i?l.setActiveColor(i):(l.inputActive=!0,a.hsv=ft(e,t,n),e.onInput(o))}else 1===o&&(l.inputActive=!0,a.hsv=ft(e,t,n));e.onInput(o)}}),(function(t,l,s){return Se("svg",Object.assign({},l,{className:"IroBox",width:n,height:o,style:s}),Se("defs",null,Se("linearGradient",{id:"s"+t,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},c[0].map((function(e){return Se("stop",{offset:e[0]+"%","stop-color":e[1]})}))),Se("linearGradient",{id:"l"+t,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},c[1].map((function(e){return Se("stop",{offset:e[0]+"%","stop-color":e[1]})}))),Se("pattern",{id:"f"+t,width:"100%",height:"100%"},Se("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+pt("#s"+t)+")"}),Se("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url("+pt("#l"+t)+")"}))),Se("rect",{rx:i,ry:i,x:e.borderWidth/2,y:e.borderWidth/2,width:n-e.borderWidth,height:o-e.borderWidth,"stroke-width":e.borderWidth,stroke:e.borderColor,fill:"url("+pt("#f"+t)+")"}),r.filter((function(e){return e!==a})).map((function(t){return Se(bt,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[t.index].x,y:u[t.index].y})})),Se(bt,{isActive:!0,index:a.index,fill:a.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:u[a.index].x,y:u[a.index].y}))}))}bt.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},mt.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var Ct=Array.apply(null,{length:360}).map((function(e,t){return t}));function kt(e){var t=ct(e),n=t.width,o=t.radius,i=t.cx,r=t.cy,l=e.colors,s=e.borderWidth,a=e.parent,c=e.color,u=c.hsv,h=l.map((function(t){return function(e,t){var n=t.hsv,o=ct(e),i=o.cx,r=o.cy,l=e.width/2-e.padding-e.handleRadius-e.borderWidth,s=(180+ut(e,n.h,!0))*(Math.PI/180),a=n.s/100*l,c="clockwise"===e.wheelDirection?-1:1;return{x:i+a*Math.cos(s)*c,y:r+a*Math.sin(s)*c}}(e,t)}));return Se(yt,Object.assign({},e,{onInput:function(t,n,o){if(0===o){var i=gt(e,t,n,h);null!==i?a.setActiveColor(i):(a.inputActive=!0,c.hsv=ht(e,t,n),e.onInput(o))}else 1===o&&(a.inputActive=!0,c.hsv=ht(e,t,n));e.onInput(o)}}),(function(t,a,d){return Se("svg",Object.assign({},a,{className:"IroWheel",width:n,height:n,style:d}),Se("defs",null,Se("radialGradient",{id:t},Se("stop",{offset:"0%","stop-color":"#fff"}),Se("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"}))),Se("g",{className:"IroWheelHue","stroke-width":o,fill:"none"},Ct.map((function(t){return Se("path",{key:t,d:_t(i,r,o/2,t,t+1.5),stroke:"hsl("+ut(e,t)+", 100%, 50%)"})}))),Se("circle",{className:"IroWheelSaturation",cx:i,cy:r,r:o,fill:"url("+pt("#"+t)+")"}),e.wheelLightness&&Se("circle",{className:"IroWheelLightness",cx:i,cy:r,r:o,fill:"#000",opacity:1-u.v/100}),Se("circle",{className:"IroWheelBorder",cx:i,cy:r,r:o,fill:"none",stroke:e.borderColor,"stroke-width":s}),l.filter((function(e){return e!==c})).map((function(t){return Se(bt,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[t.index].x,y:h[t.index].y})})),Se(bt,{isActive:!0,index:c.index,fill:c.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[c.index].x,y:h[c.index].y}))}))}var St=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(t.colors.length>0?t.colors:[t.color]).forEach((function(e){return n.addColor(e)})),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var n=new it(e,this.onColorChange.bind(this));this.colors.splice(t,0,n),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",n)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach((function(e,t){return e.index=t})),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e){var t=this;this.colors.forEach((function(e){return e.unbind()})),this.colors=[],e.forEach((function(e){return t.addColor(e)})),this.setActiveColor(0),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var n=this,o=this.events;(Array.isArray(e)?e:[e]).forEach((function(e){(o[e]||(o[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach((function(e){t.apply(null,e)})),n.deferredEvents[e]=[])}))},t.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach((function(e){var o=n.events[e];o&&o.splice(o.indexOf(t),1)}))},t.prototype.emit=function(e){for(var t=this,n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];var i=this.activeEvents,r=!!i.hasOwnProperty(e)&&i[e];if(!r){i[e]=!0;var l=this.events[e]||[];l.forEach((function(e){return e.apply(t,n)})),i[e]=!1}},t.prototype.deferredEmit=function(e){for(var t,n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];var i=this.deferredEvents;(t=this).emit.apply(t,[e].concat(n)),(i[e]||(i[e]=[])).push(n)},t.prototype.setOptions=function(e){this.setState(Object.assign({},this.state,e))},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach((function(e){return e.reset()})),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e){0===e?this.emit("input:start",this.color):1===e?this.emit("input:move",this.color):2===e&&this.emit("input:end",this.color)},t.prototype.render=function(e,t){var n=this,o=t.layout;return Array.isArray(o)||(o=[{component:kt},{component:mt}],t.transparency&&o.push({component:mt,options:{sliderType:"alpha"}})),Se("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},o.map((function(e,o){var i=e.component,r=e.options;return Se(i,Object.assign({},t,r,{ref:void 0,onInput:n.emitInputEvent.bind(n),parent:n,index:o}))})))},t}(Te);St.defaultProps=Object.assign({},{width:300,height:300,handleRadius:8,handleSvg:null,handleProps:{x:0,y:0},color:"#fff",colors:[],borderColor:"#fff",borderWidth:0,wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",layoutDirection:"vertical",sliderSize:null,sliderMargin:12,padding:6},{colors:[],display:"block",id:null,layout:"default",margin:null});var xt,Pt,Tt,Et,Wt,Mt=((Pt=function(e,t){var n,o,i,r,l,s,a,c=document.createElement("div");function u(){var t=e instanceof Element?e:document.querySelector(e);t.appendChild(n.base),n.onMount(t)}return o=Se(xt,Object.assign({},{ref:function(e){return n=e}},t)),i=c,pe.__p&&pe.__p(o,i),s=(l=r===ye)?null:r&&r.__k||i.__k,o=Se(Pe,null,[o]),a=[],Fe(i,l?i.__k=o:(r||i).__k=o,s||be,be,void 0!==i.ownerSVGElement,r&&!l?[r]:s?null:me.slice.call(i.childNodes),a,!1,r||be,l),De(a,o),"loading"!==document.readyState?u():document.addEventListener("DOMContentLoaded",u),n}).prototype=(xt=St).prototype,Object.assign(Pt,xt),Pt.__component=xt,Pt);(Wt=Tt||(Tt={})).version="5.2.3",Wt.Color=it,Wt.ColorPicker=Mt,(Et=Wt.ui||(Wt.ui={})).h=Se,Et.ComponentBase=yt,Et.Handle=bt,Et.Slider=mt,Et.Wheel=kt,Et.Box=wt;var Ot=Tt;const At=e=>{const[n,o]=z(null),[i,r]=z(null);var l,s,a,c,u;l=()=>{const t=Ot.ColorPicker("#rgb-color-picker",{borderWidth:2,color:e.rgbColor||"#FFFFFF",layout:[{component:Ot.ui.Wheel,options:{borderColor:"#d1d1d1"}},{component:Ot.ui.Slider,options:{borderColor:"#d1d1d1",sliderType:"value"}}]}),n=Ot.ColorPicker("#white-color-picker",{borderWidth:2,color:e.whiteColor||"#FFFFFF",layout:[{component:Ot.ui.Slider,options:{borderColor:"#d1d1d1",minTemperature:4e3,maxTemperature:9e3,sliderType:"kelvin",sliderShape:"circle"}}]}),i=Ot.ColorPicker("#white-value-picker",{borderWidth:2,color:e.whiteValueColor||"#FFFFFF",layout:[{component:Ot.ui.Slider,options:{borderColor:"#d1d1d1",sliderType:"value"}}]});o(n.color.kelvin),r(n.color.value),t.on("color:change",e=>{_(re.RGB),f(e.rgb)}),t.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"rgb",color:t.rgb})}),n.on("color:change",e=>{_(re.WHITE),p({kelvin:e.kelvin,value:i.color.value}),o(e.kelvin),r(e.value)}),n.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"white",color:t.rgb})}),i.on("color:change",e=>{_(re.WHITE),p({kelvin:n.color.kelvin,value:e.value}),o(e.kelvin),r(e.value)}),i.on("input:end",t=>{"function"==typeof e.onColorSet&&e.onColorSet({type:"whiteValue",color:t.rgb})})},s=[],u=J(G++,4),!t.__s&&(a=u.__H,c=s,!a||a.length!==c.length||c.some((function(e,t){return e!==a[t]})))&&(u.__=l,u.__H=s,F.__h.push(u));const d=(e,t)=>("00"+e).slice(("00"+e).length-t),f=t=>{const n=d(t.r,3),o=d(t.g,3),i=d(t.b,3);e.webSocketService&&e.webSocketService.send(`rgbctrl:r:${n}:g:${o}:b:${i}`)},p=t=>{const n=t.value/100,o=t.kelvin-4e3,i=Math.round(o/5e3*100)/100,r=Math.round(255*i),l=255-r<0?0:255-r,s=d((r*n).toFixed(0),3),a=d((l*n).toFixed(0),3);e.webSocketService&&e.webSocketService.send(`whitectrl:w:${s}:ww:${a}`)},_=t=>{"function"==typeof e.onControlModeToggle&&(e.controlMode!==t?(e.onControlModeToggle(t),e.rgbColor&&t===re.RGB&&f(e.rgbColor),n&&i&&t===re.WHITE&&p({kelvin:n,value:i})):e.onControlModeToggle(re.STANDBY))};return h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"modeRgb"},"RGB Mode"),h(he,{on:e.controlMode===re.RGB,onClick:()=>{_(re.RGB)}}),h("div",{class:"color-picker"},h("div",{id:"rgb-color-picker"})),e.controlMode===re.RGB&&h(Z,{icon:R.INFO,text:"While manual RGB mode is enabled, Lumenator will not respond to external control commands."})),h("div",{class:"form-group no-margin"},h("label",{for:"modeWhite"},"White Mode"),h(he,{on:e.controlMode===re.WHITE,onClick:()=>{_(re.WHITE)}}),h("div",{class:"color-picker"},h("div",{id:"white-color-picker"}),h("div",{id:"white-value-picker"})),e.controlMode===re.WHITE&&h(Z,{icon:R.INFO,text:"While manual white mode is enabled, Lumenator will not respond to external control commands."}))))},It=e=>{const[t,n]=z(e.activeId||0);return h(f,null,h("div",{class:"lum-Nav"},h("ul",{class:"lum-NavMenu"},Array.isArray(e.children)?e.children.map(e=>{const o=e.props;return h("li",{class:"tab"+(e.props.id===t?" active":""),onClick:()=>{n(e.props.id)}},o.title)}):e.children.props?h("li",{class:"tab active"},e.children.props.title):void 0)),h("main",null,Array.isArray(e.children)?e.children.find(e=>e.props.id===t):e.children.props?e.children:void 0))},Rt=e=>h("div",null,e.children),Nt=e=>{const[t,n]=z(!1),[o,i]=z(!1);return h(f,null,h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"ssid"},"Network SSID"),h(ue,{id:"ssid",value:e.configNetwork&&e.configNetwork.ssid||void 0,onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({accessPoint:{...e.configAccessPoint},network:{...e.configNetwork,ssid:t}})}})),h("div",{class:"form-group no-margin"},h("label",{for:"password"},"Network Password"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(ue,{id:"password",type:t?"string":"password",value:e.configNetwork&&e.configNetwork.pass||void 0,onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({accessPoint:{...e.configAccessPoint},network:{...e.configNetwork,pass:t}})}})),h("button",{type:"button",class:"ml-small",onClick:()=>{n(!t)}},t?"Hide":"Show"))))),h("section",null,h("div",{class:"grid-large"},h("div",{class:"form-group no-margin"},h("label",{for:"ssid"},"Access Point Security Password"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(ue,{id:"apPass",type:o?"string":"password",value:e.configAccessPoint&&e.configAccessPoint.pass||void 0,onChange:t=>{"function"==typeof e.onConfigUpdate&&e.onConfigUpdate({network:{...e.configNetwork},accessPoint:{...e.configAccessPoint,pass:t}})}})),h("button",{type:"button",class:"ml-small",onClick:()=>{i(!o)}},o?"Hide":"Show"))),h("div",{class:"helper-text mt-large"},"Password for the setup access point page when Lumenator cannot connect to the network."))))};let Gt;var Ft;(Ft=Gt||(Gt={}))[Ft.OFF=0]="OFF",Ft[Ft.ON=1]="ON";class Dt extends te{constructor(){super(),this.DEVELOPMENT||this.connect()}connect=()=>{const e="ws://"+document.location.host+":1337";if(document.location.host.length){let t=0;const n=setInterval(()=>{t++,this.websocket=new WebSocket(e),this.websocket.onopen=()=>{clearInterval(n)},this.websocket.onerror=e=>{5===t&&clearInterval(n)}},1e3)}};send=e=>{this.websocket&&e&&this.websocket.send(e)}}class Bt extends p{configService=new ie;websocketService=new Dt;constructor(){super(),this.state={controlMode:re.STANDBY,loading:!0},this.saveConfiguration=this.saveConfiguration.bind(this)}init=async()=>{try{const e=await this.configService.loadConfigJson();e&&this.setState({originalConfig:{...e},config:{...e},loading:!1})}catch(e){console.error(e),this.setState({loading:!1})}};componentDidMount(){this.init()}isGpioMode=e=>e===re.GPIO_B||e===re.GPIO_G||e===re.GPIO_R||e===re.GPIO_W||e===re.GPIO_WW;handleControlModeToggle=e=>{this.isGpioMode(this.state.controlMode)&&this.websocketService.send(`gpio:${this.state.controlMode}:${Gt.OFF}`),this.isGpioMode(e)&&this.websocketService.send(`gpio:${e}:${Gt.ON}`),e===re.STANDBY&&this.websocketService.send("standby"),this.setState({controlMode:e})};handleColorSet=e=>{"rgb"===e.type&&this.setState({rgbColor:e.color}),"white"===e.type&&this.setState({whiteColor:e.color}),"whiteValue"===e.type&&this.setState({whiteValueColor:e.color})};hasUnsavedChanges(){return JSON.stringify(this.state.originalConfig)!==JSON.stringify(this.state.config)}saveConfiguration(){this.setState({loading:!0}),this.state.config&&this.configService.saveConfigJson(this.state.config).then(e=>{!0===e&&setTimeout(()=>{this.setState({originalConfig:{...this.state.config},loading:!1})},1e3)})}render(){return h("div",{id:"lumenator-web-app"},this.state.loading&&h(fe,null),h("header",null,h("div",{class:"header-container"},h("div",{class:"header-items"},h("h2",null,"Lumenator"),this.state.originalConfig&&this.state.originalConfig.device.name&&h(ee,{text:this.state.originalConfig.device.name}),h("div",{class:"version"},"v1.0")))),h(It,{activeId:1},h(Rt,{id:1,title:"Device"},h(de,{deviceConfig:this.state.config&&this.state.config.device,gpioConfig:this.state.config&&this.state.config.gpio,onConfigUpdate:(e,t)=>{this.setState({config:{...this.state.config,device:e,gpio:t}})},controlMode:this.state.controlMode,onControlModeToggle:this.handleControlModeToggle})),h(Rt,{id:2,title:"Network"},h(Nt,{configNetwork:this.state.config&&this.state.config.network,configAccessPoint:this.state.config&&this.state.config.accessPoint,onConfigUpdate:e=>{this.setState({config:{...this.state.config,network:e.network,accessPoint:e.accessPoint}})}})),h(Rt,{id:3,title:"Control"},h(At,{webSocketService:this.websocketService,controlMode:this.state.controlMode,onControlModeToggle:this.handleControlModeToggle,onColorSet:this.handleColorSet,rgbColor:this.state.rgbColor,whiteColor:this.state.whiteColor,whiteValueColor:this.state.whiteValueColor}))),this.hasUnsavedChanges()&&h("section",{class:"action-section"},h("div",null,h(Z,{icon:R.ALERT,type:A.BASIC_BORDERLESS,text:"Unsaved Changes"})),h("div",null,h("button",{onClick:()=>{this.setState({config:{...this.state.originalConfig}})}},"Reset"),h("button",{class:"primary",onClick:this.saveConfiguration},"Save Configuration"))),JSON.stringify(this.state.config))}}const Ut=({config:e={},...t})=>h("main",null,h("section",null,h("h4",null,"Welcome!"),h("p",null,'To get started, fill out the network configuration form below, then click "Save and Restart". Once configured, Lumenator will try to connect to your wireless network. If unsuccessful, this access point will become available again for configuration.')),h("section",null,h("h4",null,"Network Configuration"),h("p",null,"Lumenator will use these settings to attempt a wifi connection."),h("div",{class:"grid-large"},h("div",{class:"form-group"},h("label",{for:"name"},"Network SSID"),h("div",{class:"flex-stretch"},h("div",{class:"flex-grow"},h(ue,{id:"ssid",value:e.network&&e.network.ssid||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&e.network&&t.onConfigUpdate({...e,network:{...e.network,ssid:n}})}})))),h("div",{class:"form-group"},h("label",{for:"pass"},"Network Password"),h(ue,{id:"pass",value:e.network&&e.network.pass||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&e.network&&t.onConfigUpdate({...e,network:{...e.network,pass:n}})}})))),h("section",null,h("h4",null,"Access Point Configuration"),h("p",null,"For security, it is recommended to add an access point password."),h("div",{class:"grid-large"},h("div",{class:"form-group"},h("label",{for:"apPass"},"Access Point Security Password"),h(ue,{id:"apPass",value:e.accessPoint&&e.accessPoint.pass||void 0,onChange:n=>{"function"==typeof t.onConfigUpdate&&e.accessPoint&&t.onConfigUpdate({...e,accessPoint:{...e.accessPoint,pass:n}})}}),h("div",{class:"helper-text"},"Password for the setup access point (this page) when Lumenator cannot connect to the network.")))));class Ht extends p{hardwareService=new ce;configService=new ie;constructor(){super(),this.state={}}init=async()=>{try{const e=await this.configService.loadConfigJson();e&&this.setState({originalConfig:{...e},config:{...e}})}catch(e){}};componentDidMount(){this.init()}hasUnsavedChanges(){return JSON.stringify(this.state.originalConfig)!==JSON.stringify(this.state.config)}render(){return h("div",{id:"lumenator-web-app"},h("header",null,h("div",{class:"header-container"},h("div",{class:"header-items"},h("h2",null,"Lumenator")))),h(It,{activeId:1},h(Rt,{id:1,title:"Setup"},h(Ut,{config:this.state.config,onConfigUpdate:e=>{this.setState({config:{...e}})}}))),this.hasUnsavedChanges()&&h("section",{class:"action-section"},h("div",null,h(Z,{icon:R.ALERT,type:A.BASIC_BORDERLESS,text:"Unsaved Changes"})),h("div",null,h("button",{onClick:()=>{this.setState({config:{...this.state.originalConfig}})}},"Reset"),h("button",{class:"primary",onClick:()=>{this.state.config&&this.configService.saveConfigJson(this.state.config).then(e=>{!0===e&&(this.setState({originalConfig:{...this.state.config}}),this.hardwareService.restart())})}},"Save and Restart"))),JSON.stringify(this.state.config))}}O(h("setup"===("lumenator-setup"===document.body.id?"setup":"app")?Ht:Bt,null),document.body)}();