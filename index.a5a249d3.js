!function(){var e,t,n,o;function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}(t=e||(e={}))[t.STANDBY=0]="STANDBY",t[t.RGB=1]="RGB",t[t.WHITE=2]="WHITE",t[t.GPIO_TESTING=3]="GPIO_TESTING",(o=n||(n={}))[o.OFF=0]="OFF",o[o.ON=1]="ON";var a,i,l,s=e.STANDBY,u=function(e,t){var n=document.getElementById(e);n&&n.setState(t)},d=function(){var e=function(e){i=e,console.log(i),i.device&&(Object.keys(i.device).forEach((function(e){u(e,{value:i.device[e]})})),i.device.name&&u("title-chip",{text:i.device.name})),i.network&&Object.keys(i.network).forEach((function(e){u(e,{value:i.network[e]})}))};fetch("config").then((function(e){return e.json()})).then((function(t){t&&e(t)})).catch((function(e){console.warn("Something went wrong loading the config json file.",e),window.scrollTo(0,0),document.querySelector("#error-messages").setState({text:"Error loading configuration"})}))},f=function(){s!==e.RGB&&(s=e.RGB,document.querySelector("#modeRgb").setState({state:"ON"}));var t=l.getCurColorRgb(),n="00".concat(t.r).slice("00".concat(t.r).length-3),o="00".concat(t.g).slice("00".concat(t.g).length-3),r="00".concat(t.b).slice("00".concat(t.b).length-3);a&&a.send("rgbctrl:r:".concat(n,":g:").concat(o,":b:").concat(r))};(function(){var e="ws://"+document.location.host+":1337";if(document.location.host.length)var t=0,n=setInterval((function(){t++,(a=new WebSocket(e)).onopen=function(){clearInterval(n)},a.onerror=function(e){5===t&&(clearInterval(n),function(e){document.querySelector("#error-messages").setState({text:"Error establishing Web Socket connection"}),window.scrollTo(0,0),console.log(e)}(e))}}),1e3)})(),function(){document.addEventListener("touchstart",(function(){}),!0);for(var t=Array.from(document.querySelectorAll(".mode-toggle")),o=0,c=t;o<c.length;o++)c[o].addEventListener("onToggle",(function(o){var c=o.target.state;if("ON"===c.state){var i,l=r(t);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.state.id!==c.id&&"ON"===u.state.state&&u.setState({state:"OFF"})}}catch(e){l.e(e)}finally{l.f()}switch(c.id){case"modeRgb":s=e.RGB,document.querySelector("#rgb-warning").setState({text:"While manual RGB mode is enabled, Lumenator will not respond to external control commands."}),f();break;case"modeWhite":s=e.WHITE;break;default:s=e.GPIO_TESTING,document.querySelector("#gpio-test-warning").setState({text:"While GPIO testing is enabled, Lumenator will not respond to external control commands."})}}else"OFF"===c.state&&(s=e.STANDBY,document.querySelector("#gpio-test-warning").setState({visible:!1,text:null}),document.querySelector("#rgb-warning").setState({visible:!1,text:null}),a&&a.send("standby"));a&&"modeRgb"!==c.id&&"modeWhite"!==c.id&&a.send("".concat(o.detail.id,":").concat(n[o.detail.state]))}))}(),d(),fetch("devicePresets").then((function(e){return e.json()})).then((function(e){e&&e})).catch((function(e){console.warn("Something went wrong loading the device presets.",e),window.scrollTo(0,0),document.querySelector("#error-messages").setState({text:"Error loading device presets"})})),l=new KellyColorPicker({place:"control-color-picker",size:225,color:"rgb(0, 0, 255)",userEvents:{mousemoveh:function(){f()},mousemovesv:function(){f()},mouseuph:function(){f()},mouseupsv:function(){f()}}})}();
//# sourceMappingURL=index.a5a249d3.js.map
